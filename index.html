<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ุฅู ุชู ูุงู (ETY) - ุดุฑููู ุงูุฑููู ุงูุฃูู ูู ุงูุณุนูุฏูุฉ ูุชุตููู ุงููููุงุช ุงูุจุตุฑูุฉุ ุจุฑูุฌุฉ ุงูููุงูุนุ ูุงูุชุณููู ุงูุฑููู. ุญููู ุฅุจุฏุงุนูุฉ ููุซูุฉ ุจุฑูู FL-63005888.">
    <meta name="keywords" content="ุชุตููู, ุชุณููู, ุจุฑูุฌุฉ ููุงูุน, ูููุฉ ุจุตุฑูุฉ, ุงูุณุนูุฏูุฉ, ETY, ุชุณููู ุฑููู, ุณูู">
    <title>ุฅู ุชู ูุงู ููุชุตููู ูุงูุชุณููู - ุดุฑููู ุงูุฑููู ุงููุนุชูุฏ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Markdown Parser for AI responses -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Tajawal', Arial, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .ai-gradient-bg {
            background: linear-gradient(135deg, #4f46e5 0%, #9333ea 100%);
        }

        .service-card {
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #e5e7eb;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .service-icon-wrapper {
            background: linear-gradient(135deg, var(--start-color), var(--end-color));
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            margin-bottom: 1rem;
            color: white;
            font-size: 1.5rem;
        }

        .whatsapp-float {
            position: fixed;
            bottom: 24px;
            left: 24px;
            z-index: 1000;
            background: #25d366;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }

        .whatsapp-float:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.6);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(37, 211, 102, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }
        
        /* Shimmer effect for AI loading */
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }
        
        .loading-shimmer {
            animation: shimmer 2s infinite linear;
            background: linear-gradient(to right, #f6f7f8 4%, #edeef1 25%, #f6f7f8 36%);
            background-size: 1000px 100%;
        }

        .modal-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        .modal-container.open {
            display: flex;
        }
        .modal-content {
            background: white;
            border-radius: 16px;
            max-width: 95%;
            width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            animation: fadeIn 0.3s ease-out;
            transform: scale(0.9);
        }
        .modal-content.show {
            transform: scale(1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            transform: translateX(120%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .notification.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .notification.info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }

        .mobile-menu {
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .mobile-menu.open {
            transform: translateX(0);
        }
        
        .prose h3 { font-size: 1.25rem; font-weight: 700; margin-top: 1rem; margin-bottom: 0.5rem; color: #1e40af; }
        .prose ul { list-style-type: disc; padding-right: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.25rem; }
        .prose p { margin-bottom: 0.75rem; line-height: 1.6; }
        .prose strong { color: #4b5563; }

        .sparkle-btn {
            position: relative;
            overflow: hidden;
        }
        .sparkle-btn::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            animation: sparkle-anim 3s infinite;
        }
        @keyframes sparkle-anim {
            0% { transform: translate(-100%, -100%) rotate(45deg); }
            100% { transform: translate(100%, 100%) rotate(45deg); }
        }
        
        .api-status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }
        .api-active { background-color: #10b981; box-shadow: 0 0 5px #10b981; }
        .api-inactive { background-color: #ef4444; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Notification Container -->
    <div id="notification" class="notification"></div>

    <!-- WhatsApp Float Button -->
    <a href="https://wa.me/966596466303" target="_blank" class="whatsapp-float" title="ุชูุงุตู ูุนูุง ุนุจุฑ ูุงุชุณุงุจ">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.488"/>
        </svg>
    </a>

    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3 space-x-reverse">
                    <!-- Logo with Double Click Action -->
                    <img src="https://lh3.googleusercontent.com/pw/AP1GczMlMGIcHu0CxKNYY9F64IsUOtvFbj6cwTzziWuaiqm_mrue8WXgCDZkb43ciu6uvUpHTsno4sQrNbUrIVw8Vml9DGvtL17to7LRQsDb7zgcjuFgTvtWkpzrxs2xKrtYbFqYJcNCzQIzrScCIrHvAt_UWg=w158-h126-s-no-gm?authuser=0" alt="ุดุนุงุฑ ุฅู ุชู ูุงู" class="w-12 h-12 object-contain rounded-lg cursor-pointer" ondblclick="openModal('apiSettingsModal')" title="ุงููุฑ ูุฑุชูู ููุฅุนุฏุงุฏุงุช">
                    <h1 class="text-lg md:text-xl font-bold text-gray-800 leading-tight">ุฅู ุชู ูุงู</h1>
                </div>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center space-x-8 space-x-reverse">
                    <a href="#home" class="relative text-gray-600 font-medium hover:text-blue-600 transition-colors">ุงูุฑุฆูุณูุฉ</a>
                    <a href="#services" class="relative text-gray-600 font-medium hover:text-blue-600 transition-colors">ุงูุฎุฏูุงุช</a>
                    <a href="#portfolio" class="relative text-gray-600 font-medium hover:text-blue-600 transition-colors">ุฃุนูุงููุง</a>
                    <a href="#ai-tools" class="relative text-indigo-600 font-bold hover:text-indigo-800 transition-colors">ุฃุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู โจ</a>
                    <a href="#contact" class="relative text-gray-600 font-medium hover:text-blue-600 transition-colors">ุชูุงุตู ูุนูุง</a>
                </nav>

                <!-- Mobile Menu Button -->
                <div class="flex items-center gap-2 md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobileMenu" class="mobile-menu fixed top-0 right-0 h-full w-64 bg-white shadow-xl z-50 md:hidden">
            <div class="p-6">
                <button onclick="toggleMobileMenu()" class="float-left text-gray-600 mb-8">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <nav class="space-y-4 mt-8">
                    <a href="#home" onclick="toggleMobileMenu()" class="block text-gray-700 hover:text-blue-600 py-2 border-b">ุงูุฑุฆูุณูุฉ</a>
                    <a href="#services" onclick="toggleMobileMenu()" class="block text-gray-700 hover:text-blue-600 py-2 border-b">ุงูุฎุฏูุงุช</a>
                    <a href="#portfolio" onclick="toggleMobileMenu()" class="block text-gray-700 hover:text-blue-600 py-2 border-b">ุฃุนูุงููุง</a>
                    <a href="#ai-tools" onclick="toggleMobileMenu()" class="block text-indigo-600 font-bold hover:text-indigo-800 py-2 border-b">ุฃุฏูุงุช AI ุงููุฌุงููุฉ โจ</a>
                    <a href="#contact" onclick="toggleMobileMenu()" class="block text-gray-700 hover:text-blue-600 py-2">ุชูุงุตู ูุนูุง</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="gradient-bg text-white py-20 relative overflow-hidden">
        <!-- Decoration Circles -->
        <div class="absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -mr-20 -mt-20"></div>
        <div class="absolute bottom-0 left-0 w-96 h-96 bg-white opacity-5 rounded-full -ml-32 -mb-32"></div>

        <div class="container mx-auto px-4 text-center relative z-10">
            <h1 class="text-3xl md:text-6xl font-bold mb-6 leading-tight">ุฅู ุชู ูุงู ููุชุตููู</h1>
            <p class="text-base md:text-2xl mb-12 opacity-90 leading-tight">ูุตูุน ูู ูุณุชูุจูุงู ุฑูููุงู ูุจูุฑุงู.. ูุฏุนููุงู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู</p>
            
            <!-- Statistics -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-12">
                <div class="bg-white/10 backdrop-blur-sm rounded-lg p-6 hover:bg-white/20 transition-colors">
                    <div class="text-3xl font-bold">13+</div>
                    <div class="text-sm opacity-80">ุณูุฉ ุฎุจุฑุฉ</div>
                </div>
                <div class="bg-white/10 backdrop-blur-sm rounded-lg p-6 hover:bg-white/20 transition-colors">
                    <div class="text-3xl font-bold">500+</div>
                    <div class="text-sm opacity-80">ูุดุฑูุน</div>
                </div>
                <div class="bg-white/10 backdrop-blur-sm rounded-lg p-6 hover:bg-white/20 transition-colors">
                    <div class="text-3xl font-bold">200+</div>
                    <div class="text-sm opacity-80">ุนููู</div>
                </div>
                <div class="bg-white/10 backdrop-blur-sm rounded-lg p-6 hover:bg-white/20 transition-colors">
                    <div class="text-3xl font-bold">24/7</div>
                    <div class="text-sm opacity-80">ุฏุนู</div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col lg:flex-row justify-center items-center gap-4 lg:gap-6 max-w-5xl mx-auto flex-wrap">
                <!-- About Us Button (REPLACED SMART QUOTE) -->
                <button onclick="openAboutModal()" class="sparkle-btn group relative bg-indigo-600 text-white px-8 py-4 rounded-2xl font-bold text-lg shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 w-full lg:w-[320px] overflow-hidden border border-indigo-400">
                    <div class="relative flex items-center justify-center gap-3">
                        <span class="text-2xl">โน๏ธ</span>
                        <span>ูู ูุญู</span>
                    </div>
                </button>

                <!-- AI Consultant Button -->
                <button onclick="openAIModal()" class="group relative bg-white text-indigo-700 px-8 py-4 rounded-2xl font-bold text-lg shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 w-full lg:w-[260px] overflow-hidden border-2 border-indigo-200">
                    <div class="absolute inset-0 bg-gradient-to-r from-indigo-50 to-purple-100 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    <div class="relative flex items-center justify-center gap-3">
                        <span class="text-2xl animate-bounce">๐ค</span>
                        <span>ุงุณุชุดุฑ ูุณุชุดุงุฑูุง</span>
                    </div>
                </button>
                
                <button onclick="showAllPackages()" class="group relative bg-gradient-to-r from-teal-400 to-cyan-500 text-white px-8 py-4 rounded-2xl font-bold text-lg shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 w-full lg:w-[260px] overflow-hidden">
                    <div class="relative flex items-center justify-center gap-3">
                        <span class="text-2xl">๐</span>
                        <span>ุงูุจุงูุงุช ุงููููุฒุฉ</span>
                    </div>
                </button>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gray-800 mb-4">ุฎุฏูุงุชูุง ุงููุชููุฒุฉ</h2>
                <p class="text-xl text-gray-600">ููุฏู 12 ุฎุฏูุฉ ูุชูุงููุฉ ุชุดูู ุญููู ุชูููุฉ ูุชุณููููุฉ ูุชุนููููุฉ ูููู ุฃุนูุงูู</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="services-container">
                <!-- Service cards will be populated by JavaScript -->
            </div>
        </div>
    </section>
    
    <!-- Smart Portfolio Section (Updated) -->
    <section id="portfolio" class="py-20 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-800 mb-4">ูุนุฑุถ ุฃุนูุงููุง ุงูุฐูู</h2>
                <p class="text-xl text-gray-600">ุฌููุฉ ูู ุฅุจุฏุงุนุงุชูุง ุงูุฑูููุฉ.. ุงูุชูู ูุง ููููู</p>
            </div>

            <!-- Portfolio Controls (Removed Search & All) -->
            <div class="flex justify-center mb-8">
                <div class="flex flex-wrap justify-center gap-2 bg-white p-2 rounded-full shadow-sm border border-gray-100" id="portfolio-filters">
                    <!-- 'All' button removed as requested -->
                    <button onclick="filterPortfolio('profile')" class="filter-btn active bg-blue-600 text-white shadow-md px-6 py-2 rounded-full font-medium transition-all hover:bg-blue-700">ุจุฑููุงูู</button>
                    <button onclick="filterPortfolio('web')" class="filter-btn px-6 py-2 rounded-full font-medium transition-all bg-gray-100 text-gray-600 hover:bg-gray-200">ููุงูุน ููุชุงุฌุฑ</button>
                    <button onclick="filterPortfolio('menu')" class="filter-btn px-6 py-2 rounded-full font-medium transition-all bg-gray-100 text-gray-600 hover:bg-gray-200">ูููู ุฅููุชุฑููู</button>
                    <button onclick="filterPortfolio('misc')" class="filter-btn px-6 py-2 rounded-full font-medium transition-all bg-gray-100 text-gray-600 hover:bg-gray-200">ุฃุนูุงู ูุชููุนุฉ</button>
                </div>
            </div>

            <!-- Portfolio Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="portfolio-grid">
                <!-- Items will be injected by JS -->
            </div>
        </div>
    </section>

    <!-- AI Tools Section -->
    <section id="ai-tools" class="py-20 bg-gradient-to-b from-indigo-900 to-purple-900 text-white relative overflow-hidden">
         <div class="absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/circuit-board.png')]"></div>
         <div class="container mx-auto px-4 relative z-10">
            <div class="text-center mb-16">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-white/20 rounded-full mb-4 backdrop-blur-md">
                    <span class="text-3xl">๐ค</span>
                </div>
                <h2 class="text-4xl font-bold mb-4">ุฃุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุฌุงููุฉ</h2>
                <p class="text-xl text-indigo-200">ุฌุฑุจ ุฃุฏูุงุชูุง ุงูุญุตุฑูุฉ ุงููุฏุนููุฉ ุจู Gemini ูุชุนุฒูุฒ ุฃุนูุงูู ุงูุขู</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Smart Quote Card -->
                <div class="bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 hover:bg-white/20 transition-all cursor-pointer group" onclick="openSmartQuoteModal()">
                    <div class="text-4xl mb-4 group-hover:scale-110 transition-transform">โก</div>
                    <h3 class="text-xl font-bold mb-2">ุงูุชุณุนูุฑ ุงูุฐูู ุงูููุฑู</h3>
                    <p class="text-indigo-200 mb-4 text-sm">ุตู ุงุญุชูุงุฌุงุชู ุจูุบุชู ุงูุนุงุฏูุฉุ ูุณูููู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุจุญุณุงุจ ุงูุชูููุฉ ูุฅูุดุงุก ุณูุฉ ูุดุชุฑูุงุชู ููุฑุงู.</p>
                    <span class="text-white font-bold flex items-center gap-2 text-sm">
                        ุงุญุณุจ ุงูุขู <span class="group-hover:translate-x-[-5px] transition-transform">โ</span>
                    </span>
                </div>

                <!-- Logo Generator Card -->
                <div class="bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 hover:bg-white/20 transition-all cursor-pointer group" onclick="openLogoModal()">
                    <div class="text-4xl mb-4 group-hover:scale-110 transition-transform">๐จ</div>
                    <h3 class="text-xl font-bold mb-2">ุงุณุชูุฏูู ุงูุดุนุงุฑุงุช AI</h3>
                    <p class="text-indigo-200 mb-4 text-sm">ุญูู ุฃููุงุฑู ุฅูู ุดุนุงุฑุงุช ูุฑุฆูุฉ ูุน ุงุณู ูุดุฑูุนู ุจุงูุนุฑุจู ูุงูุฅูุฌููุฒู ูุฃููููุฉ ูุฎุตุตุฉ.</p>
                    <span class="text-white font-bold flex items-center gap-2 text-sm">
                        ุตูู ุดุนุงุฑู <span class="group-hover:translate-x-[-5px] transition-transform">โ</span>
                    </span>
                </div>

                <!-- Content Generator Card (Updated) -->
                <div class="bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 hover:bg-white/20 transition-all cursor-pointer group" onclick="openContentModal()">
                    <div class="text-4xl mb-4 group-hover:scale-110 transition-transform">๐</div>
                    <h3 class="text-xl font-bold mb-2">ุตุงูุน ุงููุญุชูู ุงูุดุงูู</h3>
                    <p class="text-indigo-200 mb-4 text-sm">ุฃูุดุฆ ุจุฑููุงูู ุดุฑูุชูุ ูุญุชูู SEOุ ุฃู ูุตูุต ุฅุนูุงููุฉ ุงุญุชุฑุงููุฉ ุจุถุบุทุฉ ุฒุฑ ูุงุญุฏุฉ.</p>
                    <span class="text-white font-bold flex items-center gap-2 text-sm">
                        ุฌุฑุจ ุงูุขู <span class="group-hover:translate-x-[-5px] transition-transform">โ</span>
                    </span>
                </div>

                <!-- Consultant Card -->
                <div class="bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 hover:bg-white/20 transition-all cursor-pointer group" onclick="openAIModal()">
                    <div class="text-4xl mb-4 group-hover:scale-110 transition-transform">๐จโ๐ผ</div>
                    <h3 class="text-xl font-bold mb-2">ุงููุณุชุดุงุฑ ุงูุฐูู</h3>
                    <p class="text-indigo-200 mb-4 text-sm">ุงุญุตู ุนูู ุชุญููู ููุฑู ููุดุฑูุนู ูุงูุชุฑุงุญุงุช ูุฎุตุตุฉ ูููุฌุงุญ ูุงูููู.</p>
                    <span class="text-white font-bold flex items-center gap-2 text-sm">
                        ุงุณุชุดุฑ ุงูุขู <span class="group-hover:translate-x-[-5px] transition-transform">โ</span>
                    </span>
                </div>
            </div>
         </div>
    </section>

    <!-- Partners Section -->
    <section id="partners" class="py-20 bg-gradient-to-br from-gray-50 to-blue-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gray-800 mb-4">ุดุฑูุงุก ุงููุฌุงุญ</h2>
                <p class="text-xl text-gray-600 mb-8">ููุฎุฑ ุจุดุฑุงูุงุชูุง ุงูุงุณุชุฑุงุชูุฌูุฉ ูุน ุฃูุถู ุงูุดุฑูุงุช ูุงููุคุณุณุงุช</p>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 mb-12" id="partners-grid">
                <!-- Partner cards will be populated by JavaScript -->
            </div>
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <h3 class="text-2xl font-bold text-gray-800 text-center mb-8">ูุตุต ูุฌุงุญ ูุดุชุฑูุฉ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8" id="success-stories">
                    <!-- Success stories will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Why Choose Us Section -->
    <section id="why-us" class="py-20 bg-gradient-to-br from-indigo-50 via-white to-purple-50">
        <div class="container mx-auto px-4 relative z-10">
            <div class="text-center mb-16">
                <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full mb-6 shadow-lg">
                    <span class="text-3xl text-white">๐</span>
                </div>
                <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6 leading-tight">ููุงุฐุง ุชุฎุชุงุฑูุงุ</h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                    ูุญู ูุณูุง ูุฌุฑุฏ ููุฏูู ุฎุฏูุงุชุ ุจู ุดุฑูุงุก ูุฌุงุญ ูุณุนู ูุชุญููู ุฃูุฏุงูู ูุชุทููุฑ ุฃุนูุงูู ุจุฃุญุฏุซ ุงูุญููู ุงูุชูููุฉ ูุงูุฅุจุฏุงุนูุฉ
                </p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16" id="why-us-grid">
                <!-- Features will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gray-800 mb-4">ุชูุงุตู ูุนูุง</h2>
                <p class="text-xl text-gray-600">ูุญู ููุง ููุณุงุนุฏุชู ูู ุชุญููู ุฃูุฏุงูู</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12" id="contact-container">
                <!-- Contact Info -->
                <div class="bg-gray-50 rounded-2xl p-8 shadow-sm">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">ูุนูููุงุช ุงูุงุชุตุงู</h3>
                    <div class="space-y-6">
                        <div class="flex items-center space-x-4 space-x-reverse">
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                            </div>
                            <div>
                                <p class="font-medium text-gray-900">ุงููุงุชู / ูุงุชุณุงุจ</p>
                                <p class="text-gray-600" dir="ltr">+966 59 646 6303</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4 space-x-reverse">
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                            </div>
                            <div>
                                <p class="font-medium text-gray-900">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</p>
                                <p class="text-gray-600">info@etydm.com</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4 space-x-reverse">
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                            </div>
                            <div>
                                <p class="font-medium text-gray-900">ุงููููุน</p>
                                <p class="text-gray-600">ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contact Form with AI Feature -->
                <form class="bg-white rounded-2xl p-8 shadow-lg border border-gray-100" onsubmit="event.preventDefault(); showNotification('ุชู ุฅุฑุณุงู ุฑุณุงูุชู ุจูุฌุงุญ! ุณูุชูุงุตู ูุนู ูุฑูุจุงู.', 'success');">
                    <div class="mb-4">
                        <label class="block text-gray-700 font-bold mb-2">ุงูุงุณู ุงููุงูู</label>
                        <input type="text" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:border-blue-500 transition-colors" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 font-bold mb-2">ุฑูู ุงูุฌูุงู</label>
                        <input type="tel" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:border-blue-500 transition-colors" required>
                    </div>
                    <div class="mb-4 relative">
                        <label class="block text-gray-700 font-bold mb-2">ุงูุฑุณุงูุฉ</label>
                        <textarea id="contactMessage" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:border-blue-500 transition-colors h-32" required placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..."></textarea>
                        
                        <!-- AI Improve Button -->
                        <button type="button" onclick="refineMessage()" class="absolute bottom-3 left-3 bg-indigo-100 text-indigo-700 text-sm px-3 py-1 rounded-md hover:bg-indigo-200 transition-colors flex items-center gap-1">
                            <span>โจ</span> ุชุญุณูู ุงูุตูุงุบุฉ
                        </button>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition-colors shadow-md">
                        ุฅุฑุณุงู ุงูุฑุณุงูุฉ
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer style="background-color: #1E2A38; color: #FFFFFF; padding: 40px 20px;">
        <div class="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-right">
            <div>
                <h4 class="text-xl font-bold mb-4">ุฅู ุชู ูุงู ููุชุตููู</h4>
                <p class="text-gray-400 leading-relaxed">ุดุฑููู ุงูุฑููู ุงููุชูุงูู ูุฎุฏูุงุช ุงูุชุตูููุ ุงูุจุฑูุฌุฉุ ูุงูุชุณููู ุงูุฅููุชุฑููู. ูุตูุน ุงููุฑู ูู ุฃุนูุงูู.</p>
                <div class="mt-4 border-t border-gray-700 pt-4">
                    <p class="text-xs text-gray-400 mb-1">ููุซู ูุฏู ุงููุฑูุฒ ุงูุณุนูุฏู ููุฃุนูุงู</p>
                    <div class="flex flex-col gap-1 text-xs text-gray-300">
                        <span>ูุซููุฉ ุงูุนูู ุงูุญุฑ: FL-63005888</span>
                        <span>ุฑูู ุงูุชูุซูู: 0000162606</span>
                    </div>
                    <img src="https://www.saudibusiness.gov.sa/images/whiteSbcLogo.png" alt="ุดุนุงุฑ ุงููุฑูุฒ ุงูุณุนูุฏู ููุฃุนูุงู" class="mt-3 h-8 opacity-80">
                </div>
            </div>
            <div>
                <h4 class="text-xl font-bold mb-4">ุฑูุงุจุท ุณุฑูุนุฉ</h4>
                <ul class="space-y-2 text-gray-400">
                    <li><a href="#services" class="hover:text-white transition-colors">ุงูุฎุฏูุงุช</a></li>
                    <li><a href="#partners" class="hover:text-white transition-colors">ุดุฑูุงุก ุงููุฌุงุญ</a></li>
                    <li><a href="#contact" class="hover:text-white transition-colors">ุงุชุตู ุจูุง</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-xl font-bold mb-4">ุชูุงุตู ูุนูุง</h4>
                <ul class="space-y-2 text-gray-400">
                    <li dir="ltr">+966 59 646 6303</li>
                    <li>info@etydm.com</li>
                </ul>
            </div>
        </div>
        <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
            <p>ยฉ 2025 ุฅู ุชู ูุงู ููุชุตููู ูุงูุชุณููู. ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
        </div>
    </footer>

    <!-- Modals -->
    
    <!-- About Us Modal (NEW) -->
    <div id="aboutModal" class="modal-container" onclick="closeModal('aboutModal')">
        <div class="modal-content max-w-4xl" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center gap-3">
                    <span class="text-3xl text-indigo-600">โน๏ธ</span>
                    <h2 class="text-2xl font-bold text-gray-800">ูู ูุญู - ุฅู ุชู ูุงู</h2>
                </div>
                <button onclick="closeModal('aboutModal')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <div class="prose max-w-none text-gray-700 leading-relaxed">
                <p class="text-lg font-bold text-indigo-900 mb-4">ูุญู "ุฅู ุชู ูุงู ููุชุตููู ูุงูุชุณููู"ุ ููุงูุชู ุงูุฑูููุฉ ุงูุฑุงุฆุฏุฉ ูู ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ.</p>
                
                <p class="mb-4">
                    ูุฌูุน ุจูู ุงูุฅุจุฏุงุน ุงูููู ูุงูุชูููุฉ ุงููุชูุฏูุฉ ูููุฏู ุญูููุงู ุฑูููุฉ ูุชูุงููุฉ ุชุฑูุน ูู ูููุฉ ุนูุงูุชู ุงูุชุฌุงุฑูุฉ. ูุชุฎุตุตูู ูู <strong>ุชุตููู ุงููููุงุช ุงูุจุตุฑูุฉ</strong> ุงูุชู ุชุฎูุฏ ูู ุงูุฐุงูุฑุฉุ ู<strong>ุชุทููุฑ ุงูููุงูุน ูุงููุชุงุฌุฑ ุงูุฅููุชุฑูููุฉ</strong> ุฐุงุช ุงูุฃุฏุงุก ุงูุนุงููุ ู<strong>ุงูุชุณููู ุงูุฑููู</strong> ุงููุฏุฑูุณ ุงูุฐู ูุณุชูุฏู ุฌูููุฑู ุจุฏูุฉ.
                </p>
                
                <p class="mb-6">
                    ูุฑูููุง ุดุบูู ุจุงูุชูุงุตููุ ููุชุฒู ุจุงูุฌูุฏุฉุ ููุณุนู ุฏุงุฆูุงู ูุชุญููู ุฑุคูุชู ุฅูู ูุงูุน ุฑููู ููููุณ ูุญูู ุฃูุฏุงูู ุงูุชุฌุงุฑูุฉ ููุฒูุฏ ูู ูุจูุนุงุชู.
                </p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                    <div class="bg-indigo-50 p-4 rounded-lg text-center">
                        <span class="block text-2xl mb-2">๐ฏ</span>
                        <span class="font-bold text-indigo-800">ุฑุคูุชูุง</span>
                        <p class="text-sm mt-1">ุฃู ูููู ุงูุฎูุงุฑ ุงูุฃูู ููุญููู ุงูุฑูููุฉ ูู ุงูููููุฉ.</p>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg text-center">
                        <span class="block text-2xl mb-2">๐</span>
                        <span class="font-bold text-purple-800">ุฑุณุงูุชูุง</span>
                        <p class="text-sm mt-1">ุชูููู ุงูุฃุนูุงู ุจุฃุฏูุงุช ูุญููู ุชูููุฉ ูุจุชูุฑุฉ.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg text-center">
                        <span class="block text-2xl mb-2">โญ</span>
                        <span class="font-bold text-blue-800">ููููุง</span>
                        <p class="text-sm mt-1">ุงูุฅุจุฏุงุนุ ุงูุฌูุฏุฉุ ูุงูุงูุชุฒุงู ุจุงูููุงุนูุฏ.</p>
                    </div>
                </div>

                <!-- Legal/Trust Section -->
                <div class="bg-gray-900 text-white p-6 rounded-xl flex flex-col md:flex-row justify-between items-center gap-6 shadow-lg">
                    <div class="text-center md:text-right">
                        <h4 class="font-bold text-lg mb-2 text-indigo-300">ููุซูููู ููุนุชูุฏูู</h4>
                        <p class="text-sm opacity-90 mb-1">ูุซููุฉ ุงูุนูู ุงูุญุฑ: <span class="font-mono text-yellow-400">FL-63005888</span></p>
                        <p class="text-sm opacity-90">ุฑูู ุงูุชูุซูู: <span class="font-mono text-yellow-400">0000162606</span></p>
                    </div>
                    <div class="bg-white/10 p-2 rounded-lg backdrop-blur-sm">
                        <img src="https://www.saudibusiness.gov.sa/images/whiteSbcLogo.png" alt="ุงููุฑูุฒ ุงูุณุนูุฏู ููุฃุนูุงู" class="h-16 w-auto object-contain">
                    </div>
                </div>
            </div>
            
            <div class="mt-8 flex gap-4">
                <button onclick="document.getElementById('services').scrollIntoView({behavior: 'smooth'}); closeModal('aboutModal');" class="flex-1 bg-indigo-600 text-white py-3 rounded-lg font-bold hover:bg-indigo-700 transition-colors">
                    ุงูุชุดู ุฎุฏูุงุชูุง
                </button>
                <button onclick="document.getElementById('contact').scrollIntoView({behavior: 'smooth'}); closeModal('aboutModal');" class="flex-1 bg-white border-2 border-indigo-600 text-indigo-600 py-3 rounded-lg font-bold hover:bg-indigo-50 transition-colors">
                    ุชูุงุตู ูุนูุง
                </button>
            </div>
        </div>
    </div>

    <!-- Portfolio Details Modal (Updated for PDF & Website Support) -->
    <div id="portfolioModal" class="modal-container" onclick="closeModal('portfolioModal')">
        <div class="modal-content max-w-5xl" onclick="event.stopPropagation()">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <span id="modalProjectCategory" class="text-sm font-bold text-blue-600 bg-blue-50 px-3 py-1 rounded-full mb-2 inline-block"></span>
                    <h2 id="modalProjectTitle" class="text-3xl font-bold text-gray-800"></h2>
                </div>
                <button onclick="closeModal('portfolioModal')" class="text-gray-500 hover:text-gray-700 bg-gray-100 p-2 rounded-full">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Media Container (Image or PDF) -->
                <div id="modalMediaContainer" class="lg:col-span-2 rounded-xl overflow-hidden shadow-lg border border-gray-100 bg-gray-50 min-h-[300px] flex items-center justify-center relative">
                    <!-- Content will be injected here by JS -->
                </div>
                
                <!-- Details Container -->
                <div class="space-y-6 lg:col-span-1">
                    <div>
                        <h3 class="font-bold text-gray-700 mb-2">ุนู ุงููุดุฑูุน</h3>
                        <p id="modalProjectDesc" class="text-gray-600 leading-relaxed"></p>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-bold text-gray-700 mb-2">ุงูุฎุฏูุงุช ุงููููุฐุฉ</h3>
                        <div id="modalProjectTags" class="flex flex-wrap gap-2"></div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="space-y-3">
                        <!-- PDF Button -->
                         <div id="pdfDownloadBtnContainer" class="hidden">
                            <a id="pdfDownloadLink" href="#" target="_blank" class="w-full bg-gray-800 text-white py-2 rounded-lg font-bold hover:bg-gray-900 transition-colors flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                <span>ูุชุญ ุงูููู ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ</span>
                            </a>
                        </div>
                        
                        <!-- Website/Menu Visit Button (NEW) -->
                        <div id="websiteBtnContainer" class="hidden">
                            <a id="websiteLink" href="#" target="_blank" class="w-full bg-green-600 text-white py-2 rounded-lg font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
                                <span id="websiteBtnText">ุฒูุงุฑุฉ ุงููููุน ุงูุฅููุชุฑููู</span>
                            </a>
                        </div>

                        <button onclick="closeModal('portfolioModal'); document.getElementById('contact').scrollIntoView({behavior: 'smooth'});" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg flex items-center justify-center gap-2">
                            <span>๐</span>
                            <span>ุงุทูุจ ูุดุฑูุน ูุดุงุจู</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- API Key Settings Modal (New) -->
    <div id="apiSettingsModal" class="modal-container" onclick="closeModal('apiSettingsModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center gap-2">
                    <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11.536 16.22a1 1 0 01-.197.265l-2.828 2.829a1 1 0 01-1.414 0l-1.414-1.414a1 1 0 010-1.414l2.828-2.829a1 1 0 01.265-.197c2.73-1.353 5.487-1.35 6.743.74 0 0 .753-1.528 2.5-3.5 1.748-1.972 2-3.5 2-3.5z"></path></svg>
                    <h2 class="text-2xl font-bold text-gray-800">ุฅุนุฏุงุฏุงุช ููุชุงุญ ุงูุฐูุงุก ุงูุงุตุทูุงุนู</h2>
                </div>
                <button onclick="closeModal('apiSettingsModal')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="bg-blue-50 border-r-4 border-blue-500 p-4 mb-6 rounded-lg">
                <p class="text-sm text-blue-700">
                    ูุชุดุบูู ููุฒุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ ูุฑุฌู ุฅุฏุฎุงู ููุชุงุญ Google Gemini API ุงูุฎุงุต ุจู.
                    ุณูุชู ุญูุธ ุงูููุชุงุญ ูู ูุชุตูุญู ููุท ููู ูุชู ุฅุฑุณุงูู ูุฃู ุฎุงุฏู ุขุฎุฑ.
                    <br><strong>ููุงุญุธุฉ:</strong> ุฅุฐุง ููุช ุจูุถุน ุงูููุชุงุญ ูู ุงูููุฏ ุงููุตุฏุฑู (FIXED_API_KEY)ุ ุณูุชู ุงุณุชุฎุฏุงูู ุชููุงุฆูุงู.
                </p>
                <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-xs font-bold text-blue-600 underline mt-2 inline-block">ุงุญุตู ุนูู ููุชุงุญ ูุฌุงูู ูู ููุง</a>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="block text-gray-700 font-bold mb-2">Google Gemini API Key</label>
                    <input type="password" id="userApiKeyInput" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:border-blue-500 text-left" placeholder="AIza..." dir="ltr">
                </div>
                
                <button onclick="saveUserApiKey()" class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors">
                    ุญูุธ ูุชูุนูู
                </button>
                
                <button onclick="clearUserApiKey()" class="w-full bg-gray-200 text-gray-700 py-2 rounded-lg font-bold hover:bg-gray-300 transition-colors text-sm">
                    ุญุฐู ุงูููุชุงุญ ุงููุญููุธ ูุงูุนูุฏุฉ ููุงูุชุฑุงุถู
                </button>
            </div>
        </div>
    </div>

    <!-- Service Details Modal -->
    <div id="serviceDetailsModal" class="modal-container" onclick="closeModal('serviceDetailsModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                <h2 id="serviceDetailsTitle" class="text-2xl font-bold text-gray-800"></h2>
                <button onclick="closeModal('serviceDetailsModal')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="serviceDetailsContent" class="space-y-8"></div>
        </div>
    </div>

    <!-- AI Consultant Modal -->
    <div id="aiConsultantModal" class="modal-container" onclick="closeModal('aiConsultantModal')">
        <div class="modal-content border-2 border-indigo-200" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center gap-3">
                    <span class="text-3xl">โจ</span>
                    <div>
                        <h2 class="text-2xl font-bold text-indigo-800">ูุณุชุดุงุฑ ุฅู ุชู ูุงู ุงูุฐูู</h2>
                        <p class="text-sm text-gray-500">ุฏุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุญูู ูุดุฑูุนู ูููุชุฑุญ ุงูุฃูุถู ูู</p>
                    </div>
                </div>
                <button onclick="closeModal('aiConsultantModal')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="bg-indigo-50 p-6 rounded-xl mb-6">
                <label class="block text-indigo-900 font-bold mb-2">ุฃุฎุจุฑูุง ุนู ูุดุฑูุนู ุฃู ููุฑุชู:</label>
                <textarea id="aiProjectInput" class="w-full p-4 rounded-lg border-2 border-indigo-200 focus:border-indigo-500 focus:outline-none h-32" placeholder="ูุซุงู: ุฃุฑูุฏ ูุชุญ ูุชุฌุฑ ุฅููุชุฑููู ูุจูุน ุงููููุฉ ุงููุฎุชุตุฉ ูู ุงูุฑูุงุถุ ูุฃุญุชุงุฌ ูุชุณููู ููู ููููุฉ ุจุตุฑูุฉ ุชุฌุฐุจ ุงูุดุจุงุจ."></textarea>
                <button onclick="analyzeProjectWithGemini()" class="w-full mt-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-xl font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all flex items-center justify-center gap-2">
                    <span>๐</span>
                    <span>ุญูู ูุดุฑูุนู ุงูุขู</span>
                </button>
            </div>

            <div id="aiLoading" class="hidden">
                <div class="space-y-4">
                    <div class="h-4 bg-gray-200 rounded w-3/4 loading-shimmer"></div>
                    <div class="h-4 bg-gray-200 rounded w-1/2 loading-shimmer"></div>
                    <div class="h-32 bg-gray-200 rounded w-full loading-shimmer"></div>
                </div>
                <p class="text-center text-gray-500 mt-4 animate-pulse">ุฌุงุฑู ุงูุชูููุฑ ูุชุญููู ุงูุจูุงูุงุช...</p>
            </div>

            <div id="aiResponse" class="hidden prose max-w-none bg-white p-2 rounded-lg relative">
                <!-- AI Content will be injected here -->
            </div>
            
             <!-- TTS Player Container -->
            <div id="ttsPlayerContainer" class="hidden mt-4 pt-4 border-t border-gray-100">
                <p class="text-sm text-gray-500 mb-2">ุงุณุชูุน ุฅูู ุงููุตูุญุฉ:</p>
                <audio id="ttsAudio" controls class="w-full"></audio>
            </div>
        </div>
    </div>
    
    <!-- Content Generator Modal (UPDATED) -->
    <div id="contentModal" class="modal-container" onclick="closeModal('contentModal')">
        <div class="modal-content border-2 border-pink-200" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                 <div class="flex items-center gap-3">
                    <span class="text-3xl">๐</span>
                    <div>
                        <h2 class="text-2xl font-bold text-pink-700">ุตุงูุน ุงููุญุชูู ุงูุดุงูู</h2>
                        <p class="text-sm text-gray-500">ูุตูุต ุงุญุชุฑุงููุฉ ูุจุฑููุงููู ุฃู ูููุนู ุจููุณุฉ ุฒุฑ</p>
                    </div>
                </div>
                <button onclick="closeModal('contentModal')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
             <div class="bg-pink-50 p-6 rounded-xl mb-6 space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-pink-900 font-bold mb-2">ุงุณู ุงูุดุฑูุฉ/ุงููุดุฑูุน:</label>
                        <input type="text" id="contentBizName" class="w-full p-3 rounded-lg border-2 border-pink-200 focus:border-pink-500 focus:outline-none" placeholder="ูุซุงู: ูุคุณุณุฉ ุงูุขูุงู ุงูุฑูููุฉ">
                    </div>
                    <div>
                        <label class="block text-pink-900 font-bold mb-2">ููุน ุงููุญุชูู ุงููุทููุจ:</label>
                        <select id="contentType" class="w-full p-3 rounded-lg border-2 border-pink-200 focus:border-pink-500 focus:outline-none bg-white">
                            <option value="profile">ุจุฑููุงูู ุดุฑูุฉ ูุงูู (ูู ูุญูุ ุงูุฑุคูุฉ..)</option>
                            <option value="seo">ูุญุชูู ูุญุณู SEO ูููููุน/ุงููุชุฌุฑ</option>
                            <option value="ad">ุฅุนูุงู ุชุณูููู ูุตูุฑ ูุฌุฐุงุจ</option>
                        </select>
                    </div>
                </div>
                <div>
                     <label class="block text-pink-900 font-bold mb-2">ูุจุฐุฉ ุนู ุงูุฎุฏูุงุช ูุงููุดุงุท:</label>
                     <textarea id="contentServices" class="w-full p-3 rounded-lg border-2 border-pink-200 focus:border-pink-500 focus:outline-none h-24" placeholder="ูุซุงู: ููุฏู ุฎุฏูุงุช ุงูุชุณููู ุงูุฅููุชุฑููู ูุชุตููู ุงูููุงูุนุ ูุณุชูุฏู ุงูุดุฑูุงุช ุงููุงุดุฆุฉุ ูุฏููุง ุฎุจุฑุฉ 5 ุณููุงุช."></textarea>
                </div>
                
                <button onclick="generateContent()" class="w-full mt-4 bg-gradient-to-r from-pink-500 to-rose-600 text-white py-3 rounded-xl font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all flex items-center justify-center gap-2">
                    <span>โจ</span>
                    <span>ุชูููุฏ ุงููุญุชูู</span>
                </button>
            </div>
            
             <div id="contentLoading" class="hidden">
                 <div class="flex justify-center my-8">
                     <span class="text-4xl animate-bounce">๐ค</span>
                     <span class="text-4xl animate-bounce delay-100">โ๏ธ</span>
                     <span class="text-4xl animate-bounce delay-200">โจ</span>
                 </div>
                <p class="text-center text-gray-500 animate-pulse">ุฌุงุฑู ุตูุงุบุฉ ุงููุญุชูู ุจุงุญุชุฑุงููุฉ...</p>
            </div>

            <div id="contentResults" class="hidden mt-6">
                <h3 class="font-bold text-gray-700 mb-2">ุงููุญุชูู ุงูููุชุฑุญ:</h3>
                <div class="bg-white rounded-lg border border-pink-100 p-6 prose max-w-none" id="contentResultsText">
                    <!-- Content injected here -->
                </div>
                <div class="mt-4 flex gap-2">
                    <button onclick="copyContent()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-lg transition-colors flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>
                        ูุณุฎ ุงููุต
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- AI Logo Generator Modal (UPDATED) -->
    <div id="logoModal" class="modal-container" onclick="closeModal('logoModal')">
        <div class="modal-content border-2 border-purple-200" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                 <div class="flex items-center gap-3">
                    <span class="text-3xl">๐จ</span>
                    <div>
                        <h2 class="text-2xl font-bold text-purple-700">ุงุณุชูุฏูู ุงูุดุนุงุฑุงุช ุงููุชุทูุฑ</h2>
                        <p class="text-sm text-gray-500">ุชุตููู ุดุนุงุฑ ูุชูุงูู ูุน ุงูุงุณู ูุงูุฃููููุฉ</p>
                    </div>
                </div>
                <button onclick="closeModal('logoModal')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
             <div class="bg-purple-50 p-6 rounded-xl mb-6 space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                         <label class="block text-purple-900 font-bold mb-2">ุงุณู ุงููุดุฑูุน (ุนุฑุจู):</label>
                         <input type="text" id="logoArName" class="w-full p-3 rounded-lg border-2 border-purple-200 focus:border-purple-500 focus:outline-none" placeholder="ูุซุงู: ูููู ุงูููุฉ">
                    </div>
                    <div>
                         <label class="block text-purple-900 font-bold mb-2">ุงุณู ุงููุดุฑูุน (ุฅูุฌููุฒู):</label>
                         <input type="text" id="logoEnName" class="w-full p-3 rounded-lg border-2 border-purple-200 focus:border-purple-500 focus:outline-none" placeholder="ูุซุงู: Summit Cafe">
                    </div>
                </div>
                <div>
                     <label class="block text-purple-900 font-bold mb-2">ูุตู ุงูุฃููููุฉ ูุงูููู ุงูููุถู:</label>
                     <textarea id="logoIconDesc" class="w-full p-3 rounded-lg border-2 border-purple-200 focus:border-purple-500 focus:outline-none h-20" placeholder="ูุซุงู: ุฃููููุฉ ููุจ ูููุฉ ุจุณูุทุ ููู ุจูู ูุฐูุจู ููุญุฏ"></textarea>
                </div>
                
                <button onclick="generateLogoConcept()" class="w-full mt-4 bg-gradient-to-r from-purple-500 to-indigo-600 text-white py-3 rounded-xl font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all flex items-center justify-center gap-2">
                    <span>โจ</span>
                    <span>ุชูููุฏ ุงูุดุนุงุฑ</span>
                </button>
            </div>
            
             <div id="logoLoading" class="hidden text-center py-8">
                <div class="loading-shimmer h-48 w-48 mx-auto rounded-lg mb-4 bg-gray-200"></div>
                <p class="text-gray-500 animate-pulse">ุฌุงุฑู ุฑุณู ุงูุดุนุงุฑ ูุฏูุฌ ุงูุฃุณูุงุก...</p>
                <p class="text-xs text-gray-400 mt-2">ููุงุญุธุฉ: ุฏูุฉ ุงููุตูุต ุงูุนุฑุจูุฉ ูุฏ ุชุชูุงูุช ูู ุงูุตูุฑ ุงููููุฏุฉ</p>
            </div>

            <div id="logoResult" class="hidden mt-6 text-center">
                <h3 class="font-bold text-gray-700 mb-4">ุชุตูููู ุงูููุชุฑุญ:</h3>
                <div class="flex justify-center">
                    <img id="generatedLogoImage" src="" alt="AI Generated Logo" class="max-w-full h-auto rounded-lg shadow-lg border border-gray-200">
                </div>
                <p class="text-sm text-gray-500 mt-2">ููุงุญุธุฉ: ูุฐู ูุณูุฏุฉ ุฃูููุฉ ููุฅููุงู. ูููู ููุตููููุง ุชุญููููุง ุฅูู ูููุฉ ูุชูุงููุฉ.</p>
                <button onclick="document.getElementById('services').scrollIntoView({behavior: 'smooth'}); closeModal('logoModal');" class="mt-4 px-6 py-2 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors">
                    ุงุทูุจ ุงูุชุตููู ุงูุงุญุชุฑุงูู ุงูุขู
                </button>
            </div>
        </div>
    </div>

    <!-- Smart Quote Modal -->
    <div id="smartQuoteModal" class="modal-container" onclick="closeModal('smartQuoteModal')">
        <div class="modal-content border-2 border-blue-200" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                 <div class="flex items-center gap-3">
                    <span class="text-3xl">โก</span>
                    <div>
                        <h2 class="text-2xl font-bold text-blue-700">ุงูุชุณุนูุฑ ุงูุฐูู ุงูููุฑู</h2>
                        <p class="text-sm text-gray-500">ุตู ูุดุฑูุนู ูุณูููู ุจุจูุงุก ุณูุฉ ูุดุชุฑูุงุชู ุชููุงุฆูุงู</p>
                    </div>
                </div>
                <button onclick="closeModal('smartQuoteModal')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
             <div class="bg-blue-50 p-6 rounded-xl mb-6 space-y-4">
                <div>
                     <label class="block text-blue-900 font-bold mb-2">ูุง ุงูุฐู ูุญุชุงุฌู ูุดุฑูุนูุ</label>
                     <textarea id="smartQuoteInput" class="w-full p-4 rounded-lg border-2 border-blue-200 focus:border-blue-500 focus:outline-none h-32" placeholder="ูุซุงู: ุฃูุง ุจูุชุญ ูุทุนู ุฌุฏูุฏ ูุฃุญุชุงุฌ ุฃุตูู ุดุนุงุฑ ููููุฉุ ูุฃูุถุงู ุงุญุชุงุฌ ูููู ูุฑูู ูุฅููุชุฑูููุ ููููุน ุชุนุฑููู ุจุณูุท ูููุทุนู."></textarea>
                </div>
                
                <button onclick="calculateSmartQuote()" class="w-full mt-4 bg-gradient-to-r from-blue-500 to-cyan-600 text-white py-3 rounded-xl font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all flex items-center justify-center gap-2">
                    <span>๐</span>
                    <span>ุชุญููู ุงูุทูุจ ูุญุณุงุจ ุงูุชูููุฉ</span>
                </button>
            </div>
            
             <div id="smartQuoteLoading" class="hidden text-center py-6">
                <p class="text-gray-500 animate-pulse text-lg">ุฌุงุฑู ุชุญููู ูุชุทูุจุงุชู ููุทุงุจูุชูุง ูุน ุฎุฏูุงุชูุง...</p>
            </div>
        </div>
    </div>

    <!-- Calculator Modal -->
    <div id="calculatorModal" class="modal-container" onclick="closeModal('calculatorModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">ุญุงุณุจุฉ ุงูุฃุณุนุงุฑ ุงููุชูุฏูุฉ</h2>
                <button onclick="closeModal('calculatorModal')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="calculatorContent"></div>
            <div class="mt-6 md:mt-8 p-4 md:p-6 bg-gray-50 rounded-lg">
                <div class="flex justify-between items-center mb-3 md:mb-4">
                    <span class="text-base md:text-lg font-semibold">ุงููุฌููุน ุงููุฑุนู:</span>
                    <span id="subtotal" class="text-base md:text-lg font-bold text-blue-600">0 ุฑูุงู</span>
                </div>
                <div class="flex justify-between items-center mb-3 md:mb-4">
                    <span id="discount-label" class="text-base md:text-lg font-semibold">ุงูุฎุตู:</span>
                    <span id="discount-amount" class="text-base md:text-lg font-bold text-gray-600">0 ุฑูุงู</span>
                </div>
                <div class="border-t pt-3 md:pt-4">
                    <div class="flex justify-between items-center mb-4 md:mb-6">
                        <span class="text-lg md:text-xl font-bold">ุงูุฅุฌูุงูู ุงูููุงุฆู:</span>
                        <span id="total" class="text-lg md:text-xl font-bold text-green-600">0 ุฑูุงู</span>
                    </div>
                </div>
                <div class="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-4 md:space-x-reverse">
                    <button onclick="showDownloadOptions()" class="flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors text-sm md:text-base">
                        ๐ฅ ุชุญููู ุนุฑุถ ุงูุณุนุฑ
                    </button>
                    <button onclick="sendToWhatsApp()" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors text-sm md:text-base">
                        ๐ฑ ุฅุฑุณุงู ุนุจุฑ ูุงุชุณุงุจ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Download Options Modal -->
    <div id="downloadOptionsModal" class="modal-container" onclick="closeModal('downloadOptionsModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="text-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800 mb-2">ุงุฎุชุฑ ููุน ุงูุชุญููู</h3>
                <p class="text-gray-600">ููู ุชุฑูุฏ ุชุญููู ุนุฑุถ ุงูุณุนุฑุ</p>
            </div>
            <div class="space-y-4">
                <button onclick="downloadQuotePDF()" class="w-full bg-red-600 text-white py-4 rounded-lg font-semibold hover:bg-red-700 transition-colors flex items-center justify-center space-x-3 space-x-reverse">
                    <span class="text-2xl">๐</span>
                    <span>ุชุญููู PDF (A4)</span>
                </button>
                <button onclick="downloadQuoteImage()" class="w-full bg-blue-600 text-white py-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center space-x-3 space-x-reverse">
                    <span class="text-2xl">๐ผ๏ธ</span>
                    <span>ุชุญููู ูุตูุฑุฉ</span>
                </button>
                <button onclick="closeModal('downloadOptionsModal')" class="w-full bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-400 transition-colors">
                    ุฅูุบุงุก
                </button>
            </div>
        </div>
    </div>
    
    <!-- All Packages Modal -->
    <div id="allPackagesModal" class="modal-container" onclick="closeModal('allPackagesModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                    <span class="text-3xl ml-3">๐</span>
                    ุงูุจุงูุงุช ุงููููุฒุฉ ุจุฎุตููุงุช ุญุตุฑูุฉ
                </h2>
                <button onclick="closeModal('allPackagesModal')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="allPackagesContent" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"></div>
        </div>
    </div>

    <!-- Hidden element for PDF/Image generation -->
    <div id="quoteTemplate" style="position: absolute; left: -9999px; top: -9999px; width: 794px; background: white; padding: 30px; box-sizing: border-box; direction: rtl; font-family: 'Tajawal', Arial, sans-serif;"></div>

    <script>
        // =================================================================
        // ุฅุนุฏุงุฏุงุช ููุชุงุญ ุงูุฐูุงุก ุงูุงุตุทูุงุนู (ููุงุณุชุฎุฏุงู ุนูุฏ ูุดุฑ ุงููููุน)
        // =================================================================
        // ๐ด ุถุน ููุชุงุญู ููุง ุจูู ุนูุงูุชู ุงูุชูุตูุต ููุนูู ุงููููุน ุจุดูู ุฏุงุฆู ุนูู ุฃู ุงุณุชุถุงูุฉ
        // ูุซุงู: const FIXED_API_KEY = "AIzaSy...";
        const FIXED_API_KEY = ""; 
        
        // ุงูููุชุงุญ ุงูุงุญุชูุงุทู ุงููุฏูุฌ ููุจูุฆุฉ ุงูุญุงููุฉ ููุท (ูุง ูุนูู ุนูุฏ ุงูููู)
        const PREVIEW_ENV_KEY = "AIzaSyDXwLdMci2IeXYpB9HMGi9i-4J75Lci4h4"; 

        // API Base Configurations
        const baseApiUrl = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent";
        const baseTtsApiUrl = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent";
        const baseImagenApiUrl = "https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict";
        
        // API Key Management Functions
        function getApiKey() {
            // ุงูุชุฑุชูุจ ูุงูุฃููููุฉ ููุจุญุซ ุนู ุงูููุชุงุญ:
            
            // 1. ููุชุงุญ ุงููุณุชุฎุฏู ุงููุญููุธ ูู ุงููุชุตูุญ (local storage)
            const localKey = localStorage.getItem('gemini_api_key');
            if (localKey && localKey.trim() !== "") return localKey;
            
            // 2. ุงูููุชุงุญ ุงูุซุงุจุช ุงูุฐู ุชุถุนู ุฃูุช ูู ุงูููุฏ (ููููู)
            if (typeof FIXED_API_KEY !== 'undefined' && FIXED_API_KEY && FIXED_API_KEY.trim() !== "") {
                return FIXED_API_KEY;
            }

            // 3. ุงูููุชุงุญ ุงููุฏูุฌ (ูุนูู ููุท ุฏุงุฎู ุจูุฆุฉ ุงููุนุงููุฉ ูุฐู)
            if (typeof PREVIEW_ENV_KEY !== 'undefined' && PREVIEW_ENV_KEY && PREVIEW_ENV_KEY.trim() !== "") {
                return PREVIEW_ENV_KEY;
            }
            
            return null;
        }

        function saveUserApiKey() {
            const input = document.getElementById('userApiKeyInput');
            const key = input.value.trim();
            if (key) {
                localStorage.setItem('gemini_api_key', key);
                showNotification('ุชู ุญูุธ ุงูููุชุงุญ ุจูุฌุงุญ! ุชู ุงูุชุจุฏูู ูููุชุงุญู ุงูุฎุงุต.', 'success');
                updateApiStatusUI();
                closeModal('apiSettingsModal');
            } else {
                showNotification('ุงูุฑุฌุงุก ุฅุฏุฎุงู ููุชุงุญ ุตุญูุญ.', 'error');
            }
        }

        function clearUserApiKey() {
            localStorage.removeItem('gemini_api_key');
            document.getElementById('userApiKeyInput').value = '';
            showNotification('ุชู ุญุฐู ููุชุงุญู ุงูุฎุงุต. ุณูุชู ูุญุงููุฉ ุงุณุชุฎุฏุงู ุงูููุชุงุญ ุงูุงูุชุฑุงุถู.', 'info');
            updateApiStatusUI();
        }

        function updateApiStatusUI() {
            const key = getApiKey();
            const dot = document.getElementById('apiStatusDot');
            const dotMobile = document.getElementById('apiStatusDotMobile');
            
            if (dot && dotMobile) {
                if (key) {
                    dot.className = "api-status-dot api-active absolute top-0 right-0 border border-white";
                    dotMobile.className = "api-status-dot api-active absolute top-0 right-0 border border-white";
                } else {
                    dot.className = "api-status-dot api-inactive absolute top-0 right-0 border border-white";
                    dotMobile.className = "api-status-dot api-inactive absolute top-0 right-0 border border-white";
                }
            }
        }
        
        // Helper to check key before actions
        function checkKeyAndPrompt() {
            const key = getApiKey();
            if (!key) {
                showNotification('ุงูุฑุฌุงุก ุชูุนูู ููุชุงุญ API ูู ุงูุฅุนุฏุงุฏุงุช', 'error');
                openModal('apiSettingsModal');
                return null;
            }
            return key;
        }

        // Data for services, packages, partners, etc.
        const servicePackages = {
            profile: {
                name: 'ุจุงูุฉ ุงูุจุฑููุงูู ุงูุงุญุชุฑุงููุฉ ุงูุดุงููุฉ',
                originalPrice: 1120,
                discountedPrice: 850,
                discount: 24,
                description: 'ุจุงูุฉ ูุชูุงููุฉ ุชุดูู ููู ุชุนุฑููู ุงุญุชุฑุงูู ูุน ูููุฉ ุจุตุฑูุฉ ูุงููุฉ ูุฌููุน ุงูููุงุฏ ุงูุชุณููููุฉ',
                includes: ['ููู ุชุนุฑููู ุงุญุชุฑุงูู', 'ุชุตููู ุดุนุงุฑ ูููุฒ', 'ูููุฉ ุจุตุฑูุฉ ูุชูุงููุฉ', 'ูุฑูุช ุงูุนูู ุงูุงุญุชุฑุงููุฉ'],
                benefits: ['ุชูููุฑ 270 ุฑูุงู', 'ูููุฉ ููุญุฏุฉ ููุชูุงุณูุฉ'],
                targetAudience: 'ุงูุดุฑูุงุช ุงููุงุดุฆุฉุ ุงููุคุณุณุงุช ุงูุตุบูุฑุฉ'
            },
            websites: {
                name: 'ุจุงูุฉ ุงูููุงูุน ูุงููุชุงุฌุฑ ุงูุฅููุชุฑูููุฉ ุงููุชูุงููุฉ',
                originalPrice: 6700,
                discountedPrice: 4800,
                discount: 28,
                description: 'ุจุงูุฉ ุดุงููุฉ ูุฅูุดุงุก ููุงูุน ุชุนุฑูููุฉ ุงุญุชุฑุงููุฉ ููุชุงุฌุฑ ุฅููุชุฑูููุฉ ูุชูุงููุฉ',
                includes: ['ูููุน ุชุนุฑููู ุฃู ูุชุฌุฑ ุฅููุชุฑููู', 'ุชุตููู ูุชุฌุงูุจ', 'ุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ SEO', 'ุงุณุชุถุงูุฉ ููุทุงู ูุณูุฉ'],
                benefits: ['ุชูููุฑ 1900 ุฑูุงู', 'ูููุน ุฌุงูุฒ ููุนูู ููุฑุงู'],
                targetAudience: 'ุงูุดุฑูุงุช ุงูุชุฌุงุฑูุฉุ ุฃุตุญุงุจ ุงููุดุงุฑูุน'
            },
            content: {
                name: 'ุจุงูุฉ ุงููุญุชูู ุงูุฐูู ุงูุดุงููุฉ',
                originalPrice: 1500,
                discountedPrice: 1100,
                discount: 27,
                description: 'ุจุงูุฉ ูุชูุงููุฉ ูุฅูุชุงุฌ ูุญุชูู ุฐูู ูุฌุฐุงุจ ูุฌููุน ููุตุงุช ุงูุชูุงุตู ุงูุงุฌุชูุงุนู',
                includes: ['ูุญุชูู ูุณุงุฆู ุงูุชูุงุตู (60 ููุดูุฑ)', 'ููุงูุงุช ูุฏููุฉ ุงุญุชุฑุงููุฉ', 'ุชูููู ูุญุชูู ุดูุฑู ูู 3 ุฃุดูุฑ', 'ูุชุงุจุฉ ุฅุนูุงููุฉ ุงุญุชุฑุงููุฉ'],
                benefits: ['ุชูููุฑ 400 ุฑูุงู', 'ูุญุชูู ูุชูุงุณู ููุฎุทุท ูู'],
                targetAudience: 'ุงูุดุฑูุงุชุ ุงููุคุซุฑููุ ุฃุตุญุงุจ ุงููุดุงุฑูุน ุงูุตุบูุฑุฉ'
            },
            analytics: {
                name: 'ุจุงูุฉ ุงูุชุญูููุงุช ุงูุฐููุฉ ุงููุชูุฏูุฉ',
                originalPrice: 2200,
                discountedPrice: 1600,
                discount: 27,
                description: 'ุจุงูุฉ ุดุงููุฉ ููุชุญูููุงุช ุงูุฐููุฉ ูุน ุชูุงุฑูุฑ ููุตูุฉ ูุฑุคู ุชุณููููุฉ ูุชูุฏูุฉ',
                includes: ['ุชุญููู ูุชูุฏู ูููููุน', 'ุชุญููู ุดุงูู ููููุงูุณูู', 'ุจุญุซ ุงูุณูู ูุงูุฌูููุฑ', 'ููุญุฉ ุชุญูู ุชูุงุนููุฉ'],
                benefits: ['ุชูููุฑ 600 ุฑูุงู', 'ููู ุนููู ููุฌูููุฑ ูุงูุณูู'],
                targetAudience: 'ุงูุดุฑูุงุช ุงููุจูุฑุฉุ ุงููุณูููู'
            },
            identity: {
                name: 'ุจุงูุฉ ุงููููุฉ ุงูุจุตุฑูุฉ ุงููุงููุฉ',
                originalPrice: 1450,
                discountedPrice: 1050,
                discount: 28,
                description: 'ุจุงูุฉ ูุชูุงููุฉ ูุชุตููู ูููุฉ ุจุตุฑูุฉ ุดุงููุฉ ูุน ุฌููุน ุงูุชุทุจููุงุช ูุงูููุงุฏ ุงูุชุณููููุฉ',
                includes: ['ุญุฒูุฉ ุงูุดุนุงุฑ ุงููุงููุฉ', 'ููุญุฉ ุงูุฃููุงู ูุงูุฎุทูุท', 'ุชุตููู ูุฑูุช ุงูุนูู', 'ูุฑู ุฑุณูู ููุธุงุฑูู'],
                benefits: ['ุชูููุฑ 400 ุฑูุงู', 'ูููุฉ ูุชูุงุณูุฉ ูููุญุฏุฉ'],
                targetAudience: 'ุงูุดุฑูุงุช ุงูุฌุฏูุฏุฉุ ุงูุนูุงูุงุช ุงูุชุฌุงุฑูุฉ'
            },
            menu: {
                name: 'ุจุงูุฉ ุงููููู ุงูุฑููู ุงููุชูุงููุฉ',
                originalPrice: 1250,
                discountedPrice: 900,
                discount: 28,
                description: 'ุจุงูุฉ ุดุงููุฉ ูุชุตููู ูููู ุฑููู ููุฑูู ูุน ุชุตููุฑ ุงุญุชุฑุงูู ููุฃุทุจุงู',
                includes: ['ูููู ูุฑูู ูุชูุฏู', 'ูููู ุฅููุชุฑููู ุชูุงุนูู', 'ูููู ุจู QR Code', 'ุชุตููุฑ ุงุญุชุฑุงูู ููุฃุทุจุงู'],
                benefits: ['ุชูููุฑ 350 ุฑูุงู', 'ุตูุฑ ุงุญุชุฑุงููุฉ ุชุฒูุฏ ุงูุทูุจุงุช'],
                targetAudience: 'ุงููุทุงุนูุ ุงูููุงููุ ูุญูุงุช ุงูุญูููุงุช'
            },
            marketing: {
                name: 'ุจุงูุฉ ุงูุชุณููู ุงูุฑููู ุงูุดุงููุฉ',
                originalPrice: 3600,
                discountedPrice: 2600,
                discount: 28,
                description: 'ุจุงูุฉ ูุชูุงููุฉ ููุชุณููู ุงูุฑููู ุชุดูู ุฅุฏุงุฑุฉ ูุณุงุฆู ุงูุชูุงุตู ูุงูุญููุงุช ุงูุฅุนูุงููุฉ ููุฏุฉ 3 ุฃุดูุฑ',
                includes: ['ุฅุฏุงุฑุฉ ูุณุงุฆู ุงูุชูุงุตู', 'ุญููุงุช ุฅุนูุงููุฉ ูุฏููุนุฉ', 'ุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ', 'ุงุณุชุฑุงุชูุฌูุฉ ุชุณููููุฉ ุดุงููุฉ'],
                benefits: ['ุชูููุฑ 1000 ุฑูุงู', 'ุฒูุงุฏุฉ ุงููุนู ุจุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ'],
                targetAudience: 'ุงูุดุฑูุงุช ุงูุชุฌุงุฑูุฉุ ุงููุชุงุฌุฑ ุงูุฅููุชุฑูููุฉ'
            },
            letterhead: {
                name: 'ุจุงูุฉ ุงููุฑู ุงูุฑุณูู ุงููุงููุฉ',
                originalPrice: 800,
                discountedPrice: 580,
                discount: 28,
                description: 'ุจุงูุฉ ุดุงููุฉ ูุฌููุน ุงูููุงุฏ ุงูุฑุณููุฉ ูุงูุฅุฏุงุฑูุฉ ููุดุฑูุงุช ูุน ุชุตุงููู ุงุญุชุฑุงููุฉ',
                includes: ['ูุฑู ุฑุณูู ุจุชุตููู ุงุญุชุฑุงูู', 'ูุธุงุฑูู ุฑุณููุฉ', 'ุชุตููู ููุงุชูุฑ ูุณูุฏุงุช ูุงููุฉ', 'ุดูุงุฏุงุช ุชูุฏูุฑ ูุชูุฑูู'],
                benefits: ['ุชูููุฑ 220 ุฑูุงู', 'ููุงุฏ ุฑุณููุฉ ููุญุฏุฉ ููุชูุงุณูุฉ'],
                targetAudience: 'ุงูุดุฑูุงุช ุงููุคุณุณุฉ ุญุฏูุซุงูุ ุงูููุงุชุจ ุงูุงุณุชุดุงุฑูุฉ'
            },
            schoolActivities: {
                name: 'ุจุงูุฉ ุงูุฃูุดุทุฉ ุงููุฏุฑุณูุฉ ุงูุดุงููุฉ',
                originalPrice: 1020,
                discountedPrice: 750,
                discount: 26,
                description: 'ุจุงูุฉ ูุชูุงููุฉ ููุฃูุดุทุฉ ุงููุฏุฑุณูุฉ ุงูุชูุงุนููุฉ ูุน ููุงุฏ ุชุนููููุฉ ูุชููุนุฉ',
                includes: ['ุฃูุฑุงู ุนูู ุชูุงุนููุฉ', 'ุจุทุงูุงุช ุชุนููููุฉ ููููุฉ', 'ููุญุงุช ุชุนููููุฉ ูุจูุฑุฉ', 'ุฃูุนุงุจ ุชุนููููุฉ ูุทุจูุนุฉ'],
                benefits: ['ุชูููุฑ 270 ุฑูุงู', 'ูุฌููุนุฉ ุดุงููุฉ ููุชููุนุฉ'],
                targetAudience: 'ุงููุฏุงุฑุณุ ุงููุนููููุ ุงููุฑุงูุฒ ุงูุชุนููููุฉ'
            },
            teachers: {
                name: 'ุจุงูุฉ ุงููุนูู ุงูุงุญุชุฑุงููุฉ ุงููุงููุฉ',
                originalPrice: 1380,
                discountedPrice: 1000,
                discount: 28,
                description: 'ุจุงูุฉ ุดุงููุฉ ูููุนูููู ุชุดูู ููู ุงูุฅูุฌุงุฒุงุช ูุงูููุงุฏ ุงูุชุนููููุฉ ูุงูุนุฑูุถ ุงูุชูุฏูููุฉ',
                includes: ['ููู ุฅูุฌุงุฒุงุช ูุนูู', 'ุนุฑูุถ ุชูุฏูููุฉ ุชูุงุนููุฉ', 'ุณูุฑุฉ ุฐุงุชูุฉ ุชุนููููุฉ ุงุญุชุฑุงููุฉ', 'ุฃูุฑุงู ุนูู ูุฎุตุตุฉ'],
                benefits: ['ุชุทููุฑ ุงููููุฉ ุงูููููุฉ', 'ุชุญุณูู ุฌูุฏุฉ ุงูููุงุฏ ุงูุชุนููููุฉ'],
                targetAudience: 'ุงููุนููููุ ุงููุฏุฑุจููุ ุงููุณุชุดุงุฑูู ุงูุชุนูููููู'
            },
            students: {
                name: 'ุจุงูุฉ ุงูุทุงูุจ ุงููุชููุฒ ุงูุดุงููุฉ',
                originalPrice: 1070,
                discountedPrice: 780,
                discount: 27,
                description: 'ุจุงูุฉ ูุชูุงููุฉ ููุทูุงุจ ุชุดูู ูุดุฑูุน ุงูุชุฎุฑุฌ ูุงูุณูุฑุฉ ุงูุฐุงุชูุฉ ูููู ุงูุฅูุฌุงุฒุงุช',
                includes: ['ูุดุฑูุน ุชุฎุฑุฌ ูุงูู', 'ุนุฑูุถ ุชูุฏูููุฉ ุฃูุงุฏูููุฉ', 'ุณูุฑุฉ ุฐุงุชูุฉ ุทูุงุจูุฉ', 'ููู ุฅูุฌุงุฒุงุช ูุฃุนูุงู ุงูุทุงูุจ'],
                benefits: ['ุชุญุณูู ุฌูุฏุฉ ุงูุนุฑูุถ ุงูุฃูุงุฏูููุฉ', 'ุฅุจุฑุงุฒ ุงูุฅูุฌุงุฒุงุช ุจุดูู ุงุญุชุฑุงูู'],
                targetAudience: 'ุทูุงุจ ุงูุฌุงูุนุงุชุ ุทูุงุจ ุงูุซุงูููุฉ'
            },
            annualReport: {
                name: 'ุจุงูุฉ ุงูุชูุฑูุฑ ุงูุณููู ุงูุงุญุชุฑุงููุฉ',
                originalPrice: 2700,
                discountedPrice: 1950,
                discount: 28,
                description: 'ุจุงูุฉ ุดุงููุฉ ูุฅุนุฏุงุฏ ุชูุฑูุฑ ุณููู ุงุญุชุฑุงูู ูุน ุฑุณูู ุจูุงููุฉ ูุชุตููุฑ ููุชูุบุฑุงูู',
                includes: ['ุชูุฑูุฑ ุณููู ุดุงูู', 'ุฑุณูู ุจูุงููุฉ ูุฅูููุฌุฑุงููู', 'ุชุตููู ุบูุงู ุงูุชูุฑูุฑ', 'ุชุตููุฑ ููุชูุบุฑุงูู ููุชูุฑูุฑ'],
                benefits: ['ุชุนุฒูุฒ ุงูุซูุฉ ูุฏู ุงููุณุงูููู', 'ุฅุจุฑุงุฒ ุงูุฅูุฌุงุฒุงุช ูุงูููู'],
                targetAudience: 'ุงูุดุฑูุงุช ุงููุจูุฑุฉุ ุงููุคุณุณุงุชุ ุงูุจููู'
            }
        };

        const servicesData = {
            profile: {
                name: 'ุชุตููู ููู ุชุนุฑููู ุงุญุชุฑุงูู',
                icon: '๐',
                price: 250,
                startColor: '#0b7d85',
                endColor: '#065f65',
                items: [
                    { name: 'ุจุฑููุงูู ุนุฑุจู (5-12 ุตูุญุฉ)', price: 250 },
                    { name: 'ุจุฑููุงูู ุนุฑุจู / ุฅูุฌููุฒู', price: 450 },
                    { name: 'ุชุตููู ุดุนุงุฑ', price: 200 },
                    { name: 'ุจูุฌ ูุงุฑุฏ', price: 80 },
                    { name: 'ูุชุงุจุฉ ูุญุชูู ูุฎุตุต ููุจุฑููุงูู (ุนุฑุจู)', price: 60 },
                    { name: 'ูุชุงุจุฉ ูุญุชูู ูุฎุตุต ุนุฑุจู / ุฅูุฌููุฒู โญ', price: 90 }
                ],
                details: {
                    overview: 'ููุฏู ุฎุฏูุฉ ุชุตููู ุงููููุงุช ุงูุชุนุฑูููุฉ ุงูุงุญุชุฑุงููุฉ ุงูุชู ุชุนูุณ ูููุฉ ุดุฑูุชู ูุชุจุฑุฒ ููุงุท ููุชูุง ุจุฃุณููุจ ูุจุชูุฑ ูุฌุฐุงุจ. ูุญู ูููู ุฃู ุงูุงูุทุจุงุน ุงูุฃูู ูููุ ูุฐูู ูุญุฑุต ุนูู ุชูุฏูู ุชุตุงููู ุนุงููุฉ ุงูุฌูุฏุฉ ุชุชุฑู ุฃุซุฑุงู ุฅูุฌุงุจูุงู ูุฏู ุนููุงุฆู.',
                    features: ['ุชุตููู ุงุญุชุฑุงูู ูุนูุณ ูููุฉ ุงูุดุฑูุฉ', 'ูุญุชูู ููุชูุจ ุจุนูุงูุฉ ุจุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ', 'ุฑุณูู ุจูุงููุฉ ูุฅูููุฌุฑุงููู ุชูุถูุญู', 'ุชุตููู ุดุนุงุฑ ูููุฒ ุฅุฐุง ูู ููู ูุชููุฑุงู', 'ุชูุณูู ุฌุงูุฒ ููุทุจุงุนุฉ ุจุฌูุฏุฉ ุนุงููุฉ'],
                    benefits: ['ุฒูุงุฏุฉ ุงูุซูุฉ ูุงููุตุฏุงููุฉ ูุฏู ุงูุนููุงุก', 'ุชุญุณูู ุงูุตูุฑุฉ ุงูููููุฉ ููุดุฑูุฉ', 'ุณูููุฉ ุงูุชุณููู ูุงูุนุฑุถ ุนูู ุงููุณุชุซูุฑูู']
                }
            },
            websites: {
                name: 'ุงูููุงูุน ุงูุชุนุฑูููุฉ ูุงููุชุงุฌุฑ ุงูุฅููุชุฑูููุฉ',
                icon: '๐',
                price: 800,
                startColor: '#3b82f6',
                endColor: '#1d4ed8',
                items: [
                    { name: 'ุตูุญุฉ ูุจูุท ูุงุญุฏุฉ', price: 800 },
                    { name: 'ูููุน ุชุนุฑููู ุฃุณุงุณู (5-8 ุตูุญุงุช)', price: 1500 },
                    { name: 'ูููุน ุชุนุฑููู ูุชูุฏู (10-15 ุตูุญุฉ)', price: 2200 },
                    { name: 'ูุชุฌุฑ ุฅููุชุฑููู ูู ููุตุฉ ุณูู', price: 1500 },
                    { name: 'ูุชุฌุฑ ุฅููุชุฑููู ูุชูุฏู (ููุชุฌุงุช ุบูุฑ ูุญุฏูุฏุฉ)', price: 4000 },
                    { name: 'ูุธุงู ุฅุฏุงุฑุฉ ุงููุญุชูู', price: 600 },
                    { name: 'ุชุทุจูู ุฌูุงู ูุฑุงูู', price: 3000 },
                    { name: 'ุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ', price: 400 },
                    { name: 'ุงุณุชุถุงูุฉ ููุทุงู ูุณูุฉ', price: 300 }
                ],
                details: {
                    overview: 'ูุตูู ููุงูุน ุชุนุฑูููุฉ ุงุญุชุฑุงููุฉ ุชูุงูุจ ุฃุญุฏุซ ุงูุชูููุงุช ูุงูุงุชุฌุงูุงุช ูู ุนุงูู ุงูุชุตููู. ููุงูุนูุง ููุณุช ูุฌุฑุฏ ูุงุฌูุฉ ุฌูููุฉุ ุจู ุฃุฏูุงุช ุชุณููููุฉ ูููุฉ ุชุณุงุนุฏ ูู ููู ุฃุนูุงูู ูุฒูุงุฏุฉ ุงูุชุดุงุฑู.',
                    features: ['ุชุตููู ูุชุฌุงูุจ ูุนูู ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ', 'ุชุญุณูู ุณุฑุนุฉ ุงููููุน ูุฃุฏุงุคู', 'ููุญุฉ ุชุญูู ุณููุฉ ุงูุงุณุชุฎุฏุงู', 'ุฑุจุท ูุน ูุณุงุฆู ุงูุชูุงุตู ุงูุงุฌุชูุงุนู', 'ุญูุงูุฉ ูุฃูุงู ุนุงูู'],
                    benefits: ['ุงููุตูู ูุฌูููุฑ ุฃูุณุน', 'ุฒูุงุฏุฉ ุงููุจูุนุงุช ูุงูุทูุจุงุช', 'ุชูุงุฌุฏ ุงุญุชุฑุงูู ุนูู ุงูุฅูุชุฑูุช']
                }
            },
            content: {
                name: 'ุฅูุดุงุก ุงููุญุชูู ูุฅุฏุงุฑุฉ ุงูุชูุงุตู',
                icon: 'โ๏ธ',
                price: 500,
                startColor: '#8b5cf6',
                endColor: '#6d28d9',
                items: [
                    { name: 'ุฎุทุฉ ูุญุชูู ุดูุฑูุฉ (12 ููุดูุฑ)', price: 500 },
                    { name: 'ุฎุทุฉ ูุญุชูู ูุชูุฏูุฉ (30 ููุดูุฑ)', price: 1200 },
                    { name: 'ูุชุงุจุฉ ููุงูุงุช ูุชูุงููุฉ ูุน SEO (5 ููุงูุงุช)', price: 400 },
                    { name: 'ุชุตููู ุจูุณุชุงุช ุงูุณุชูุฑุงู (10 ุชุตุงููู)', price: 350 },
                    { name: 'ุฅุฏุงุฑุฉ ุญุณุงุจุงุช ุงูุชูุงุตู (ุดูุฑ)', price: 1500 }
                ],
                details: {
                    overview: 'ูุตูุน ูุญุชูู ุฅุจุฏุงุนู ูุฌุฐุจ ุฌูููุฑู ููุจูู ุนูุงูุฉ ูููุฉ ูุนูู. ุฎุฏูุงุชูุง ุชุดูู ุงููุชุงุจุฉุ ุงูุชุตูููุ ูุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช ูุถูุงู ุฃูุถู ุงููุชุงุฆุฌ.',
                    features: ['ูุญุชูู ูุชููุน (ูุตูุตุ ุตูุฑุ ููุฏูู)', 'ุงุณุชุฑุงุชูุฌูุฉ ูุดุฑ ูุฏุฑูุณุฉ', 'ุชูุงุนู ูุน ุงููุชุงุจุนูู', 'ุชูุงุฑูุฑ ุฃุฏุงุก ุดูุฑูุฉ'],
                    benefits: ['ุฒูุงุฏุฉ ุงูุชูุงุนู ูุงููุชุงุจุนูู', 'ุจูุงุก ูููุฉ ูููุฉ ููุนูุงูุฉ ุงูุชุฌุงุฑูุฉ', 'ุชูููุฑ ุงูููุช ูุงูุฌูุฏ']
                }
            },
            identity: {
                name: 'ุงููููุฉ ุงูุจุตุฑูุฉ ูุงูุนูุงูุงุช ุงูุชุฌุงุฑูุฉ',
                icon: '๐จ',
                price: 600,
                startColor: '#ec4899',
                endColor: '#be185d',
                items: [
                    { name: 'ุชุตููู ุดุนุงุฑ ุงุญุชุฑุงูู (3 ุฎูุงุฑุงุช)', price: 600 },
                    { name: 'ูููุฉ ุจุตุฑูุฉ ูุงููุฉ (ุดุนุงุฑ + ูุทุจูุนุงุช)', price: 1500 },
                    { name: 'ุฏููู ุงุณุชุฎุฏุงู ุงููููุฉ', price: 300 },
                    { name: 'ุชุตููู ูุฑูุช ุดุฎุตูุฉ', price: 150 },
                    { name: 'ุชุตููู ูุฑู ุฑุณูู ูุฃุธุฑู', price: 200 }
                ],
                details: {
                    overview: 'ูุจุชูุฑ ูููุงุช ุจุตุฑูุฉ ูููุฒุฉ ุชุนูู ูู ุงูุฃุฐูุงู ูุชููุฒู ุนู ุงูููุงูุณูู. ูุฑูุฒ ุนูู ุงูุจุณุงุทุฉ ูุงููุนูู ูุฅูุดุงุก ุนูุงูุฉ ุชุฌุงุฑูุฉ ูููุฉ.',
                    features: ['ุชุตุงููู ุฃุตููุฉ ููุจุชูุฑุฉ', 'ุฏุฑุงุณุฉ ููุณูู ูุงูููุงูุณูู', 'ุชุณููู ูููุงุช ููุชูุญุฉ ุงููุตุฏุฑ', 'ุชุนุฏููุงุช ููุชูุญุฉ ุญุชู ุงูุฑุถุง'],
                    benefits: ['ุชููุฒ ูู ุงูุณูู', 'ุซูุฉ ููุตุฏุงููุฉ ุฃูุจุฑ', 'ุณูููุฉ ุงูุชุนุฑู ุนูู ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ']
                }
            },
            marketing: {
                name: 'ุงูุชุณููู ุงูุฑููู ูุงูุฅุนูุงูุงุช',
                icon: '๐ข',
                price: 1000,
                startColor: '#f59e0b',
                endColor: '#b45309',
                items: [
                    { name: 'ุฅุฏุงุฑุฉ ุญููุงุช ุฌูุฌู ุฅุฏูุงุฑุฏุฒ (ุดูุฑ)', price: 1000 },
                    { name: 'ุฅุฏุงุฑุฉ ุญููุงุช ุณูุงุจ ุดุงุช / ุชูู ุชูู', price: 1200 },
                    { name: 'ุฅุฏุงุฑุฉ ุญููุงุช ููุณุจูู / ุงูุณุชูุฑุงู', price: 900 },
                    { name: 'ุชุญุณูู ุงูุธููุฑ ูู ูุญุฑูุงุช ุงูุจุญุซ SEO', price: 1500 },
                    { name: 'ุงุณุชุดุงุฑุงุช ุชุณููููุฉ', price: 500 }
                ],
                details: {
                    overview: 'ูุณุงุนุฏู ูููุตูู ูุนููุงุฆู ุงููุณุชูุฏููู ุจุฏูุฉ ูู ุฎูุงู ุญููุงุช ุฅุนูุงููุฉ ูุฏุฑูุณุฉ ูููุฌูุฉ ุชุญูู ุฃุนูู ุนุงุฆุฏ ุนูู ุงูุงุณุชุซูุงุฑ.',
                    features: ['ุงุณุชูุฏุงู ุฏููู ููุฌูููุฑ', 'ุชุตููู ุฅุนูุงูุงุช ุฌุฐุงุจุฉ', 'ูุฑุงูุจุฉ ูุชุญุณูู ูุณุชูุฑ ููุญููุงุช', 'ุชูุงุฑูุฑ ุฃุฏุงุก ููุตูุฉ'],
                    benefits: ['ุฒูุงุฏุฉ ุงููุจูุนุงุช ูุงูุชุญูููุงุช', 'ุชูููู ุชูููุฉ ุงูุงุณุชุญูุงุฐ ุนูู ุงูุนููุงุก', 'ููู ุณุฑูุน ููุฃุนูุงู']
                }
            },
            menu: {
                name: 'ุชุตููู ุงููููู ุงูุฑููู ูุงููุฑูู',
                icon: '๐',
                price: 300,
                startColor: '#10b981',
                endColor: '#047857',
                items: [
                    { name: 'ูููู ุตูุญุฉ ูุงุญุฏุฉ', price: 150 },
                    { name: 'ูููู ูุชูุจ (4-8 ุตูุญุงุช)', price: 400 },
                    { name: 'ูููู ุฑููู (QR Code)', price: 300 },
                    { name: 'ุชุตููุฑ ุฃุทุจุงู (10 ุตูุฑ)', price: 500 },
                    { name: 'ุชุตููู ูุงุฆูุฉ ุฃุณุนุงุฑ', price: 100 }
                ],
                details: {
                    overview: 'ููุฏู ุญููู ููุงุฆู ุทุนุงู ูุจุชูุฑุฉ ูุนูููุฉ ูููุทุงุนู ูุงููุงูููุงุชุ ุชุฌูุน ุจูู ุฌูุงู ุงูุชุตููู ูุณูููุฉ ุงูุงุณุชุฎุฏุงู.',
                    features: ['ุชุตููู ูุงุชุญ ููุดููุฉ', 'ุณูููุฉ ุงูุชุนุฏูู ูุงูุชุญุฏูุซ', 'ูุณุฎ ุฑูููุฉ ููุฑููุฉ', 'ุฏุนู ูุบุงุช ูุชุนุฏุฏุฉ'],
                    benefits: ['ุชุญุณูู ุชุฌุฑุจุฉ ุงูุนููู', 'ุฒูุงุฏุฉ ูุชูุณุท ูููุฉ ุงูุทูุจ', 'ุณูููุฉ ูุดุงุฑูุฉ ุงููุงุฆูุฉ']
                }
            },
            analytics: {
                name: 'ุชุญููู ุงูุจูุงูุงุช ูุชูุงุฑูุฑ ุงูุฃุฏุงุก',
                icon: '๐',
                price: 800,
                startColor: '#3b82f6',
                endColor: '#1e40af',
                items: [
                    { name: 'ุชูุฑูุฑ ุฃุฏุงุก ุดูุฑู ูููููุน', price: 300 },
                    { name: 'ุชุญููู ุงูููุงูุณูู', price: 800 },
                    { name: 'ุชุญููู ุณููู ุงููุณุชุฎุฏููู', price: 600 },
                    { name: 'ุฅุนุฏุงุฏ ููุญุฉ ุชุญูู (Dashboard)', price: 1000 }
                ],
                details: {
                    overview: 'ูุญูู ุงูุจูุงูุงุช ุฅูู ุฑุคู ูุงุจูุฉ ููุชูููุฐ ููุณุงุนุฏุชู ูู ุงุชุฎุงุฐ ูุฑุงุฑุงุช ุตุงุฆุจุฉ ูุชุทููุฑ ุฃุนูุงูู ุจุงุณุชูุฑุงุฑ.',
                    features: ['ุจูุงูุงุช ุฏูููุฉ ูููุซููุฉ', 'ุฑุณูู ุจูุงููุฉ ุชูุถูุญูุฉ', 'ุชูุตูุงุช ุนูููุฉ ููุชุญุณูู', 'ูุชุงุจุนุฉ ุฏูุฑูุฉ'],
                    benefits: ['ููู ุฃูุถู ููุณูู ูุงูุนููุงุก', 'ุงูุชุดุงู ูุฑุต ุฌุฏูุฏุฉ ููููู', 'ุญู ุงููุดุงูู ูุจู ุชูุงูููุง']
                }
            },
            schoolActivities: {
                name: 'ุงูุฃูุดุทุฉ ุงููุฏุฑุณูุฉ ูุงูุชุนููููุฉ',
                icon: '๐',
                price: 150,
                startColor: '#f43f5e',
                endColor: '#9f1239',
                items: [
                    { name: 'ุชุตููู ุจุฑูุดูุฑ ุชุนูููู', price: 150 },
                    { name: 'ุชุตููู ููุญุฉ ูุฏุฑุณูุฉ', price: 200 },
                    { name: 'ุชุตููู ุดูุงุฏุงุช ุชูุฏูุฑ', price: 100 },
                    { name: 'ูููุชุงุฌ ููุฏูู ูุดุงุท ูุฏุฑุณู', price: 300 }
                ],
                details: {
                    overview: 'ูุฏุนู ุงููุคุณุณุงุช ุงูุชุนููููุฉ ุจุชุตุงููู ูุฃูุดุทุฉ ุฅุจุฏุงุนูุฉ ุชุนุฒุฒ ุงูุนูููุฉ ุงูุชุนููููุฉ ูุชุถูู ุฌูุงู ูู ุงููุฑุญ ูุงูุชูุงุนู.',
                    features: ['ุชุตุงููู ุทููููุฉ ูุฌุฐุงุจุฉ', 'ุฃููุงุฑ ูุจุชูุฑุฉ ููุฃูุดุทุฉ', 'ุณุฑุนุฉ ูู ุงูุชูููุฐ', 'ุฃุณุนุงุฑ ุฎุงุตุฉ ูููุฏุงุฑุณ'],
                    benefits: ['ุชุญููุฒ ุงูุทูุงุจ', 'ุชูุซูู ุงููุนุงููุงุช ุจุดูู ูููุฒ', 'ุชุนุฒูุฒ ุงููููุฉ ุงููุฏุฑุณูุฉ']
                }
            },
            annualReport: {
                name: 'ุงูุชูุงุฑูุฑ ุงูุณูููุฉ ูุงูุนุฑูุถ',
                icon: '๐',
                price: 1000,
                startColor: '#6366f1',
                endColor: '#4338ca',
                items: [
                    { name: 'ุชุตููู ุชูุฑูุฑ ุณููู (20 ุตูุญุฉ)', price: 1500 },
                    { name: 'ุนุฑุถ ุชูุฏููู PowerPoint (15 ุดุฑูุญุฉ)', price: 500 },
                    { name: 'ุงูููุฌุฑุงููู ุฅุญุตุงุฆู', price: 300 },
                    { name: 'ูุชุงุจุฉ ูุญุชูู ุงูุชูุฑูุฑ', price: 800 }
                ],
                details: {
                    overview: 'ูุจุฑุฒ ุฅูุฌุงุฒุงุชู ููููู ูู ุฎูุงู ุชูุงุฑูุฑ ุณูููุฉ ูุนุฑูุถ ุชูุฏูููุฉ ุงุญุชุฑุงููุฉ ุชุนูุณ ุงุญุชุฑุงููุฉ ูุคุณุณุชู.',
                    features: ['ุชุตููู ุฅุฎุฑุงุฌู ุนุงูู ุงูุฌูุฏุฉ', 'ุชุญููู ุงูุฃุฑูุงู ูุฑุณูู ุจูุงููุฉ', 'ุชุฏููู ูุบูู ุดุงูู', 'ุชูุณูู ููุทุจุงุนุฉ ูุงููุดุฑ ุงูุฑููู'],
                    benefits: ['ุฌุฐุจ ุงููุณุชุซูุฑูู', 'ุชุนุฒูุฒ ุงูุดูุงููุฉ ูุงููุตุฏุงููุฉ', 'ุชูุซูู ุชุงุฑูุฎ ุงูุดุฑูุฉ']
                }
            },
            teachers: {
                name: 'ุฎุฏูุงุช ุงููุนูููู ูุงููุฏุฑุจูู',
                icon: '๐',
                price: 200,
                startColor: '#14b8a6',
                endColor: '#0f766e',
                items: [
                    { name: 'ุชุตููู ููู ุฅูุฌุงุฒ ุฅููุชุฑููู', price: 300 },
                    { name: 'ุชุตููู ุญููุจุฉ ุชุฏุฑูุจูุฉ', price: 500 },
                    { name: 'ุชุตููู ุฃูุฑุงู ุนูู', price: 50 },
                    { name: 'ุณูุฑุฉ ุฐุงุชูุฉ ุชุนููููุฉ', price: 150 }
                ],
                details: {
                    overview: 'ูุณุงุนุฏ ุงููุนูููู ูุงููุฏุฑุจูู ูู ุชูุธูู ุฃุนูุงููู ูุชูุฏูููุง ุจุฃูุถู ุตูุฑุฉ ูู ุฎูุงู ุฎุฏูุงุช ุชุตููู ูุชุฎุตุตุฉ.',
                    features: ['ุชุตุงููู ุฃูุงุฏูููุฉ ูุงุญุชุฑุงููุฉ', 'ุชูุธูู ุงููุญุชูู ุจุดูู ููุทูู', 'ุณูููุฉ ุงููุดุงุฑูุฉ ูุงููุดุฑ', 'ููุงูุจ ุฌุงูุฒุฉ ููุชุนุฏูู'],
                    benefits: ['ุชูููุฑ ุงูููุช', 'ุงูุชููุฒ ุงููููู', 'ุชุญุณูู ุฌูุฏุฉ ุงูุชุนููู']
                }
            },
            students: {
                name: 'ุฎุฏูุงุช ุงูุทูุงุจ ูุงูุฎุฑูุฌูู',
                icon: '๐',
                price: 100,
                startColor: '#8b5cf6',
                endColor: '#5b21b6',
                items: [
                    { name: 'ุชูุณูู ุฑุณุงุฆู ุงููุงุฌุณุชูุฑ', price: 400 },
                    { name: 'ุชุตููู ุนุฑุถ ูุดุฑูุน ุชุฎุฑุฌ', price: 200 },
                    { name: 'ุชุตููู ุจูุณุชุฑ ุนููู', price: 150 },
                    { name: 'ุณูุฑุฉ ุฐุงุชูุฉ ููุฎุฑูุฌูู', price: 100 }
                ],
                details: {
                    overview: 'ูุฏุนู ูุณูุฑุชู ุงูุฃูุงุฏูููุฉ ุจุฎุฏูุงุช ุชุตููู ูุชูุณูู ุงุญุชุฑุงููุฉ ุชุณุงุนุฏู ูู ุชุญููู ุฃูุถู ุงูุฏุฑุฌุงุช ูุงูุชููุฒ.',
                    features: ['ุงูุชุฒุงู ุจูุนุงููุฑ ุงูุฌุงูุนุฉ', 'ุชุตุงููู ุนุตุฑูุฉ ูุฌุฐุงุจุฉ', 'ุฃุณุนุงุฑ ููุงุณุจุฉ ููุทูุงุจ', 'ุฏูุฉ ูู ุงูููุงุนูุฏ'],
                    benefits: ['ุถูุงู ูุจูู ุงูุจุญุซ', 'ุชุฑู ุงูุทุจุงุน ููู', 'ุณูููุฉ ุงูุนุฑุถ ูุงูุดุฑุญ']
                }
            },
            letterhead: {
                name: 'ุงููุทุจูุนุงุช ุงูุชุฌุงุฑูุฉ',
                icon: '๐จ๏ธ',
                price: 300,
                startColor: '#f97316',
                endColor: '#c2410c',
                items: [
                    { name: 'ุชุตููู ุฑูู ุฃุจ', price: 200 },
                    { name: 'ุชุตููู ููุงูุฑ ุฅุนูุงูู', price: 150 },
                    { name: 'ุชุตููู ุงุณุชููุฑุงุช', price: 100 },
                    { name: 'ุชุตููู ููุญุฉ ุฎุงุฑุฌูุฉ', price: 300 }
                ],
                details: {
                    overview: 'ูุตูู ูู ูุงูุฉ ุงููุทุจูุนุงุช ุงูุชุฌุงุฑูุฉ ูุงูุฏุนุงุฆูุฉ ุงูุชู ุชุญุชุงุฌูุง ูุชุณููู ููุชุฌุงุชู ูุฎุฏูุงุชู ุนูู ุฃุฑุถ ุงููุงูุน.',
                    features: ['ุฏูุฉ ุนุงููุฉ ููุทุจุงุนุฉ', 'ุฃููุงู ุฌุฐุงุจุฉ ููุชูุงุณูุฉ', 'ุฃููุงุฑ ุฅุจุฏุงุนูุฉ ุบูุฑ ุชูููุฏูุฉ', 'ุชุณููู ุณุฑูุน'],
                    benefits: ['ุฌุฐุจ ุงูุชุจุงู ุงูุนููุงุก', 'ูุดุฑ ุงููููุฉ ุงูุจุตุฑูุฉ', 'ุฒูุงุฏุฉ ุงููุจูุนุงุช ุงููุจุงุดุฑุฉ']
                }
            }
        };

        let currentCart = {
            serviceKey: null,
            items: [],
            isPackage: false,
            packageKey: null
        };

        // Portfolio Data
        const portfolioItems = [
            // Profile Items - Added pdfUrl property
            {
                id: 1,
                title: 'ุชูุฑูุฑ ุณููู ุฌูุนูุฉ ูุณุงุฑุงุช',
                category: 'profile',
                image: 'https://lh3.googleusercontent.com/pw/AP1GczNauihJ3rzmKIViFZZfKpNXpMOYSI2FlNi2w_Exg0fvKJdZccw-rzDtnhgM5XdKNiAmlEnLxGB8VqX0sPaYfvhTvalp0MxDNN_iLQ3__7uNjVJRjC9dH7--ILcPkyqyfL5hjfFGrV1MHErqiMopMnF8zQ=w1600-h900-s-no-gm?authuser=0',
                pdfUrl: 'https://drive.google.com/file/d/1pqzZyR0DFSz4jurKM8hZvyrdoX76uXho/view?usp=sharing',
                desc: 'ุชุตููู ูุชุญููู ุจูุงูุงุช ุฌูุนูุฉ ูุณุงุฑุงุช ุ ุดูู 20 ุตูุญุฉ ูุน ุฅูููุฌุฑุงููู ููุฅูุฌุงุฒุงุช.',
                tags: ['ุชุตููู ุชูุฑูุฑ ุณููู', 'ูุชุงุจุฉ ูุญุชูู', 'ุฅูููุฌุฑุงููู']
            },
            {
                id: 2,
                title: 'ุชุตููู ุจุฑููุงูู ุฅุนูุงุฑ ุงููุณุงูุฏ ููุชุดุบูู ูุงูุตูุงูุฉ ',
                category: 'profile',
                image: 'https://lh3.googleusercontent.com/pw/AP1GczODDifOmTd2U5ZiWhPmOCoZWPmBDFZ68x_a48FnUXr_tAo9OQABVD7KULrh9m4DUT6vcsUmObRSBUcYtML2w8wOQZhvEfdHkHBY_UY8e6WmrLnRi0YfjUGiQcMEIAX4CA5g3whidY6FE9aIMo7Ehi_7Hw=w1600-h900-s-no-gm?authuser=0',
                pdfUrl: 'https://drive.google.com/file/d/1yRSAzCj1ziBvea6frrr3yEzt0TiOVl14/view?usp=sharing',
                desc: 'ุชุตููู ุนุตุฑู ูุฌุฐุงุจ ูููู ุชุนุฑููู ูุดุฑูุฉ ุฅุนูุงุฑ ุงููุณุงูุฏ ููุชุดุบูู ูุงูุตูุงูุฉุ ุจุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ.',
                tags: ['ุซูุงุฆู ุงููุบุฉ', 'ุชุตููู ุนุตุฑู']
            },
            {
                id: 3,
                title: 'ุจุฑููุงูู ุฃููู ุงููุชุญุฏุฉ ููุชุทููุฑ ุงูุนูุงุฑู',
                category: 'profile',
                image: 'https://lh3.googleusercontent.com/pw/AP1GczMKO-sLBfjhr4QH6TpRmCOsyxeQg6WXhbtslJkcq2VhjEtugMY9kBpYj1vd4SkI2dcTKYKNPz_fu-N1zsFzRNmYaSUPLRNb8OawEqbdhD3cML7X1C84kMDsJkNjcTLUa6ViJwBH418Y7P2pc1XtenQY7g=w1600-h900-s-no-gm?authuser=0',
                pdfUrl: 'https://drive.google.com/file/d/1WtE4hxw5uCRaewI-PY0Lc09ftEYyg9yb/view?usp=sharing',
                desc: 'ุชุตููู ุจุฑููุงูู ุดุฑูุฉ ุฃููู ููุชุทููุฑ ุงูุนูุงุฑู.',
                tags: ['ุจุฑููุงูู ุชูุงุนูู', 'PDF ุฐูู']
            },
            {
                id: 4,
                title: 'ุจุฑููุงูู ุดุฑูุฉ ููุงุณูุจ ููููุงููุงุช ุงูุนุงูุฉ',
                category: 'profile',
                image: 'https://lh3.googleusercontent.com/pw/AP1GczP6xIIBz_XslAKDgMSu3dL5bg7ZzKynCITweZ6EDjrGHyKVwgjjJRunrB0iQNXkAogz8r7VbKxRIMoCA1XaMjogiBErAyb2EQjWN7pU4QE1wtT0qhdI7XqmxDISEHYGKoHlrNFiAVLTcc0_YNS5_a7meg=w1600-h900-s-no-gm?authuser=0',
                pdfUrl: 'https://drive.google.com/file/d/1M_p9rMNkSb3HJnSjio0R5pt2dmGlElda/view?usp=sharing',
                desc: 'ุชุตููู ูุฅุฎุฑุงุฌ ููู ููุชูุจ ุชุนุฑููู ุจุจุฑุงูุฌ ุฌูุนูุฉ ุฎูุฑูุฉุ ุจุฃุณููุจ ุฅูุณุงูู ููุคุซุฑ.',
                tags: ['ูุทุงุน ุบูุฑ ุฑุจุญู', 'ุชุตููู ุฅุจุฏุงุนู']
            },

            // Web Items
            {
                id: 5,
                title: 'ุชุตููู ูุชุฌุฑ ุณููู',
                category: 'web',
                image: 'https://lh3.googleusercontent.com/pw/AP1GczNvrripjkyLcL9ETLKpewyeSNlYcq6Yu4_Xq0Aj1oA5HAyRpwjVbvmw4fakmEI-GmSEPWkVk8MEbTb86oxR2S9EnlK95Deiz3Gsz-bnpL539E7P0YTPbRdkj7vjkGNqhFjXnvXjXQ-0Gizcm6ymRdyB9w=w1600-h900-s-no-gm?authuser=0',
                websiteUrl: 'https://skoon-care.com/',
                desc: 'ุชุตููู ูุชุฌุฑ ุณููู ุงูุฅููุชุฑููู ููุนูุงูุฉ ุจุงูุนูู ูุน ุชุญุณูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุชุฌุฑุจุฉ ุงููุณุชุฎุฏู , ุชุญุณูู seo ูุญุฑูุงุช ุงูุจุญุซ ู ูุตู ุงูููุชุฌุงุช  .',
                tags: ['ูุชุฌุฑ ุฅููุชุฑููู', 'UI/UX', 'ุจูุงุจุงุช ุฏูุน ูุชููุนุฉ' ]
            },
            {
                id: 6,
                title: 'ูุชุญุฑ ุฑูุงุฏ ุงูุฅุนูุงุฑ ุงููุจุฑู',
                category: 'web',
                image: 'https://lh3.googleusercontent.com/pw/AP1GczNYJ5IEGNT-V1W9HcnMxx2UAo8ySBpDsOPCe7vEGCXi_24NA2JXRlrVDNsCGbfeihiBikGquaKpmIlzgFkQI7IszubHIcDL-v9DBWueoWSaTvO53fK7F1wJSM3HhPCUECGmFPUeRjjsUqWw-S-yrOIMiA=w1600-h900-s-no-gm?authuser=0',
                websiteUrl: 'https://r-w-d.com/',
                desc: 'ูุชุฌุฑ ุฑูุงุฏ ุงูุฅุนูุงุฑ ุงููุจุฑู ูููุชุฌุงุช ููุงุฏ ุงูุจูุงุก ุงูููุงุฏ ุงูุตุญูุฉ .',
                tags: ['ููุงุฏ ุตุญูุฉ ', 'ูุชุฌุฑ ููุงุฏ ุจูุงุก']
            },
            {
                id: 7,
                title: 'ูุชุฌุฑ ุนุณู ุตุจูุญ',
                category: 'web',
                image: 'https://lh3.googleusercontent.com/pw/AP1GczMFVYyTENVYl7Oh5FSB0Aud4J1GszEdpwMsSuYe0Imdt60l4i1i_hXv6gwe6z_fvxJ0F9achQs4vmbrN9VER_PsLddJqMd36HHpIBOsw0rT8BxTDYP27Pfq_zWXCXHmOggwm6X_q6uvBCMbBkB-bFEDjg=w1600-h900-s-no-gm?authuser=0',
                websiteUrl: 'https://sabo7.com/',
                desc: 'ูุชุฌุฑ ุนุณู ุตุจูุญ ูุจูุน ููุชุฌุงุช ุงูุนุณู .',
                tags: ['ูุชุฌุฑ ุนูู ููุตุฉ ุณูุฉ', 'ุชุฌุฑุจุฉ ูุณุชุฎุฏู']
            },
            {
                id: 8,
                title: 'ูููุน ุชุนุฑููู ุดุฑูุฉ ูุฑููุฉ ุงูููุฉ ููุฎุฏูุงุช ุงูููุฌูุณุชูุฉ',
                category: 'web',
                image: 'https://lh3.googleusercontent.com/pw/AP1GczNI_aLCI7Og6Z5ytngzUJ3kyzpsEXz9DfnXw3hZEAQbWehUTrTk8viwjbUkkJ_7roGG3luLAsMwyOxG_urSpUGgyqmR0U-a5ZWLXFlBSOajV3ztEe0B6JhkWpDQBqDZsGUOBHQ8-mXwKcwPU9Z1_Ty51A=w1600-h900-s-no-gm?authuser=0',
                websiteUrl: 'https://forceflexi.com/',
                desc: 'ูููุน ุชุนุฑููู ูุดุฑูุฉ ูุฑููุฉ ุงูููุฉ ููุฎุฏูุงุช ุงูููุฌูุณุชูุฉ.',
                tags: ['ููุตุฉ ููุฑุฏุจุฑูุณ', 'ุณุฑุนุฉ ูุงุฆูู']
            },

            // Menu Items
            {
                id: 9,
                title: 'ูููู ูููู ูุงูุณ ุฅููุชุฑููู',
                category: 'menu',
                image: 'https://lh3.googleusercontent.com/pw/AP1GczNJEJKfX_lY4KAiUT01SskmTdOVRgUQ_7nT5KiXuIqhztQ_t4SwGv2iyXmWinfSvBJvLOSrnKD2Db5mPiQ_YcuBO-CSrATswGhWuXkueAogE73_mpuwx0uapfUoP4Bj72vK4yEBRMktYImSsoNS6vnScA=w1600-h900-s-no-gm?authuser=0',
                websiteUrl: 'https://kozicoffe.netlify.app/',
                desc: 'ููู ูููู ุฅููุชุฑููู ุ ุฅุถุงูุฉ ุงูููุชุฌุงุช ูุงูุชุณุนูุฑุงุช ูููุญุฉ ุชุญูู ุฎุงุตุฉ ููุชุญูู ูู ุงูุงุณุนุงุฑ ูุงูุตูุฑ ูุงูุนุฑูุถ .',
                tags: ['ูููู ูุฑูู', 'ุชุตููุฑ ููุชุฌุงุช']
            },
            {
                id: 10,
                title: ' ูุงุฆูุฉ ุทุนุงู ุจุฑูุฑ ูุงุฑูุฌ ูุฑูู',
                category: 'menu',
                image: 'https://lh3.googleusercontent.com/pw/AP1GczMbchnu_khD5Vl3adbRmMWEypeycE_ktlbhO--YLYT7-Yns64Mnt5BqRjQ6fe7ObLbnL55WLmxkCC9Lz6BTogQMyPgTpUXuzFs4CN4won1ZdqT81k8w1wYBivgpVgZCr9x6WIBiLGAmYAJJUP8ztk7OsQ=w686-h314-s-no-gm?authuser=0',
                websiteUrl: 'https://drive.google.com/file/d/1rhfeoIhgj7lN525jv4IUIjNfT5yrxmU5/view?usp=sharing',
                desc: 'ูุชูุจ ูููู ูุงุฑูุฌ ุจุฑุฌุฑ (QR Code) ููุทุนู ุจุฑูุฑุ ูุฑูู ููุงุณูู.',
                tags: ['ูููู ูุฑูู', 'QR Code']
            },
            {
                id: 11,
                title: 'ูููู ุจุฑุฌุฑ ุณุชูุดู',
                category: 'menu',
                image: 'https://placehold.co/600x400/f97316/ffffff?text=Burger+Menu',
                websiteUrl: 'https://google.com',
                desc: 'ุชุตููู ูุงุฆูุฉ ุทุนุงู ุญุงุฆุทูุฉ (Board Menu) ููุทุนู ูุฌุจุงุช ุณุฑูุนุฉุ ุจุฃุณููุจ ูุดูู ูุฌุฐุงุจ.',
                tags: ['ููุญุงุช ูููู', 'ูุฌุจุงุช ุณุฑูุนุฉ']
            },
            {
                id: 12,
                title: 'ูููู ุญูููุงุช ุงูุดุงู',
                category: 'menu',
                image: 'https://placehold.co/600x400/db2777/ffffff?text=Sweets+Menu',
                desc: 'ูุชูุจ ูููู ุญูููุงุช ุดุฑููุฉ ูุบุฑุจูุฉุ ูุน ูุตู ุฏููู ููููููุงุช ูุตูุฑ ุนุงููุฉ ุงูุฏูุฉ.',
                tags: ['ูุชูุจ', 'ุญูููุงุช']
            },

            // Misc Items
            {
                id: 13,
                title: 'ุชุบููู ููุชุฌุงุช ุนูุงูุฉ',
                category: 'misc',
                image: 'https://placehold.co/600x400/14b8a6/ffffff?text=Packaging',
                desc: 'ุชุตููู ุนุจูุงุช ูุชุบููู ููุฌููุนุฉ ููุชุฌุงุช ุนูุงูุฉ ุจุงูุจุดุฑุฉุ ุจุฃุณููุจ "ูููููุงูุณุช" ุฃููู.',
                tags: ['ุชุตููู ุชุบููู', 'ูููุฉ ููุชุฌ']
            },
            {
                id: 14,
                title: 'ุญููุฉ ุชุณููููุฉ ููุนูุฏ',
                category: 'misc',
                image: 'https://placehold.co/600x400/6366f1/ffffff?text=Eid+Campaign',
                desc: 'ุฅุฏุงุฑุฉ ูุชุตููู ุญููุฉ ุฅุนูุงููุฉ ููุณููุฉ ุดุงููุฉ (ููุฏูู + ุจูุณุชุงุช) ููุชุฌุฑ ุฅููุชุฑููู.',
                tags: ['ุฅุฏุงุฑุฉ ุญููุงุช', 'ููุดู ุฌุฑุงููู']
            },
            {
                id: 15,
                title: 'ุชุตููู ุฌูุงุญ ูุนุฑุถ',
                category: 'misc',
                image: 'https://placehold.co/600x400/374151/ffffff?text=Exhibition+Booth',
                desc: 'ุชุตููู ุซุฑู ุฏู (3D) ูุฌูุงุญ ุดุฑูุฉ ูู ูุนุฑุถ ุฏูููุ ูุดูู ุชุตููู ุงูุฌุฏุฑุงู ูุงูุฅุถุงุกุฉ.',
                tags: ['ุชุตููู 3D', 'ูุนุงุฑุถ']
            },
            {
                id: 16,
                title: 'ููุฏูู ุชุนุฑููู ููุดุฑูุฉ',
                category: 'misc',
                image: 'https://placehold.co/600x400/ef4444/ffffff?text=Promo+Video',
                desc: 'ุฅูุชุงุฌ ููููุชุงุฌ ููุฏูู ุชุนุฑููู "ุจุฑููู" ููุดุฑูุฉุ ูุนุฑุถ ุฎุฏูุงุชูุง ููููุฒุงุชูุง ุจุฃุณููุจ ุณูููุงุฆู.',
                tags: ['ูููุชุงุฌ', 'ููุฏูู']
            }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderServices();
            renderPortfolio('profile'); // Init Portfolio with PROFILE as default
            renderPartners();
            renderWhyUs();
            renderSuccessStories();
            
            // Check API Status on load
            updateApiStatusUI();
        });

        // Portfolio Functions
        function renderPortfolio(filter) {
            const container = document.getElementById('portfolio-grid');
            container.innerHTML = '';

            const filteredItems = portfolioItems.filter(item => {
                return item.category === filter;
            });

            if (filteredItems.length === 0) {
                container.innerHTML = `<div class="col-span-full text-center py-10 text-gray-500">ูุง ุชูุฌุฏ ุฃุนูุงู ูู ูุฐุง ุงููุณู ุญุงููุงู</div>`;
                return;
            }

            filteredItems.forEach(item => {
                const card = document.createElement('div');
                card.className = 'group relative overflow-hidden rounded-xl shadow-lg cursor-pointer bg-white';
                card.onclick = () => openPortfolioModal(item);
                
                card.innerHTML = `
                    <div class="aspect-video overflow-hidden">
                        <img src="${item.image}" alt="${item.title}" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500">
                    </div>
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
                        <span class="text-blue-300 text-sm font-bold mb-1">${getCategoryName(item.category)}</span>
                        <h3 class="text-white text-xl font-bold mb-2 translate-y-4 group-hover:translate-y-0 transition-transform duration-300">${item.title}</h3>
                        <p class="text-gray-300 text-sm line-clamp-2 translate-y-4 group-hover:translate-y-0 transition-transform duration-300 delay-75">${item.desc}</p>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function filterPortfolio(category) {
            // Update UI
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white', 'shadow-md', 'active');
                btn.classList.add('bg-gray-100', 'text-gray-600');
            });
            event.target.classList.remove('bg-gray-100', 'text-gray-600');
            event.target.classList.add('bg-blue-600', 'text-white', 'shadow-md', 'active');

            // Render
            renderPortfolio(category);
        }

        function getCategoryName(cat) {
            const names = { 
                'profile': 'ุจุฑููุงูู', 
                'web': 'ููุงูุน ููุชุงุฌุฑ', 
                'menu': 'ูููู ุฅููุชุฑููู',
                'misc': 'ุฃุนูุงู ูุชููุนุฉ'
            };
            return names[cat] || 'ูุดุฑูุน';
        }

        function openPortfolioModal(item) {
            document.getElementById('modalProjectTitle').innerText = item.title;
            document.getElementById('modalProjectCategory').innerText = getCategoryName(item.category);
            document.getElementById('modalProjectDesc').innerText = item.desc;
            
            // Handle Tags
            const tagsContainer = document.getElementById('modalProjectTags');
            tagsContainer.innerHTML = item.tags.map(tag => `<span class="bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-sm">${tag}</span>`).join('');
            
            // Handle Media (Image or PDF)
            const mediaContainer = document.getElementById('modalMediaContainer');
            const downloadBtnContainer = document.getElementById('pdfDownloadBtnContainer');
            const downloadLink = document.getElementById('pdfDownloadLink');
            
            // Website/Menu Link Buttons
            const websiteBtnContainer = document.getElementById('websiteBtnContainer');
            const websiteLink = document.getElementById('websiteLink');
            const websiteBtnText = document.getElementById('websiteBtnText');

            // 1. PDF Logic
            if (item.pdfUrl && item.pdfUrl.trim() !== '') {
                // It's a PDF
                let embedUrl = item.pdfUrl;
                
                // Fix Google Drive links to be embeddable
                if (embedUrl.includes('drive.google.com') && embedUrl.includes('/view')) {
                    embedUrl = embedUrl.replace('/view', '/preview');
                }

                mediaContainer.innerHTML = `
                    <iframe src="${embedUrl}" class="w-full h-[500px] border-0" allow="autoplay"></iframe>
                `;
                
                // Show External Link Button
                downloadLink.href = item.pdfUrl;
                downloadBtnContainer.classList.remove('hidden');
            } else {
                // It's an Image
                mediaContainer.innerHTML = `
                    <img src="${item.image}" alt="${item.title}" class="w-full h-auto object-contain max-h-[500px]">
                `;
                downloadBtnContainer.classList.add('hidden');
            }
            
            // 2. Website/Menu Link Logic
            if (item.websiteUrl && item.websiteUrl.trim() !== '') {
                websiteLink.href = item.websiteUrl;
                
                // Change text based on category
                if (item.category === 'menu') {
                    websiteBtnText.innerText = 'ุชุตูุญ ุงููููู ุงูุฅููุชุฑููู';
                } else {
                    websiteBtnText.innerText = 'ุฒูุงุฑุฉ ุงููููุน ุงูุฅููุชุฑููู';
                }
                
                websiteBtnContainer.classList.remove('hidden');
            } else {
                websiteBtnContainer.classList.add('hidden');
            }
            
            openModal('portfolioModal');
        }

        function openAboutModal() {
            openModal('aboutModal');
        }

        // Mobile Menu Toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('open');
        }

        // Render Services
        function renderServices() {
            const container = document.getElementById('services-container');
            container.innerHTML = '';
            
            Object.keys(servicesData).forEach(key => {
                const service = servicesData[key];
                const card = document.createElement('div');
                card.className = 'service-card p-6 cursor-pointer';
                card.style.setProperty('--start-color', service.startColor);
                card.style.setProperty('--end-color', service.endColor);
                card.onclick = () => openServiceDetails(key);
                
                card.innerHTML = `
                    <div class="service-icon-wrapper text-3xl">
                        ${service.icon}
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">${service.name}</h3>
                    <p class="text-gray-500 mb-4 line-clamp-2">${service.details.overview}</p>
                    <div class="flex justify-between items-center mt-auto">
                        <span class="text-blue-600 font-bold text-sm">ุชุจุฏุฃ ูู ${service.price} ุฑูุงู</span>
                        <span class="text-gray-400 text-sm flex items-center gap-1">
                            ุงููุฒูุฏ <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        </span>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // Render Partners
        function renderPartners() {
            const partners = [
                { name: 'ุดุฑูุฉ ุงูุชูููุฉ ุงูุญุฏูุซุฉ', logo: 'https://tse2.mm.bing.net/th/id/OIP.HnPide3T7HBUZky05pObWwHaE4?w=866&h=571&rs=1&pid=ImgDetMain&o=7&rm=3' },
                { name: 'ูุคุณุณุฉ ุงูุจูุงุก', logo: 'https://darb.org/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Flogo.9535ecf2.png&w=256&q=75' },
                { name: 'ูุฏุงุฑุณ ุงููุณุชูุจู', logo: 'https://placehold.co/200x100/fef9c3/854d0e?text=School' },
                { name: 'ูุทุนู ุงูุฐูุงูุฉ', logo: 'https://forceflexi.com/wp-content/uploads/2023/12/aaYH6jiH_400x400.jpg' },
                { name: 'ุนูุงุฏุงุช ุงูุดูุงุก', logo: 'https://cdn.files.salla.network/homepage/2055011317/f4e6c34d-7028-4e91-8f74-5f5b054aafcb.webp' },
                { name: 'ููุชุจ ุงููุญุงูุงุฉ', logo: 'https://cdn.salla.sa/cdn-cgi/image/fit=scale-down,width=400,height=400,onerror=redirect,format=auto/jZyxya/NY9k7atvkOfCmHxp6AS2LLet2H3RZEyzxbXTMIPY.jpg' }
            ];
            
            const container = document.getElementById('partners-grid');
            container.innerHTML = partners.map(p => `
                <div class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow flex items-center justify-center h-32 overflow-hidden group">
                    <img src="${p.logo}" alt="${p.name}" class="max-h-full max-w-full object-contain filter grayscale opacity-70 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-300 transform group-hover:scale-110">
                </div>
            `).join('');
        }

        // Render Why Us
        function renderWhyUs() {
            const features = [
                { title: 'ุฌูุฏุฉ ุนุงููุฉ', desc: 'ููุชุฒู ุจุฃุนูู ูุนุงููุฑ ุงูุฌูุฏุฉ ูู ูู ูุดุฑูุน', icon: 'โญ' },
                { title: 'ุฏุนู ููู', desc: 'ุฏุนู ูุชูุงุตู ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ ูุฎุฏูุชูู', icon: '๐ง' },
                { title: 'ุฃุณุนุงุฑ ููุงูุณุฉ', desc: 'ุจุงูุงุช ูุชููุนุฉ ุชูุงุณุจ ุฌููุน ุงูููุฒุงููุงุช', icon: '๐ฐ' },
                { title: 'ุณุฑุนุฉ ุงูุชูููุฐ', desc: 'ูุญุชุฑู ุฃููุงุชูู ููุณูู ุงููุดุงุฑูุน ูู ุงูููุนุฏ', icon: '๐' }
            ];
            
            const container = document.getElementById('why-us-grid');
            container.innerHTML = features.map(f => `
                <div class="bg-white p-6 rounded-xl shadow-lg text-center transform hover:-translate-y-2 transition-transform duration-300">
                    <div class="text-4xl mb-4">${f.icon}</div>
                    <h3 class="text-xl font-bold mb-2">${f.title}</h3>
                    <p class="text-gray-500">${f.desc}</p>
                </div>
            `).join('');
        }

        // Render Success Stories
        function renderSuccessStories() {
            const container = document.getElementById('success-stories');
            container.innerHTML = `
                <div class="border-r-4 border-blue-500 pr-4">
                    <h4 class="font-bold text-lg mb-2">ุชุทููุฑ ูุชุฌุฑ ุฅููุชุฑููู ููุชุฌุฑ ุฃุฒูุงุก</h4>
                    <p class="text-gray-600">ุฒูุงุฏุฉ ุงููุจูุนุงุช ุจูุณุจุฉ 150% ุฎูุงู 3 ุฃุดูุฑ ุจุนุฏ ุฅุนุงุฏุฉ ุชุตููู ุงููุชุฌุฑ ูุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู.</p>
                </div>
                <div class="border-r-4 border-green-500 pr-4">
                    <h4 class="font-bold text-lg mb-2">ูููุฉ ุจุตุฑูุฉ ูุดุฑูุฉ ุนูุงุฑูุฉ</h4>
                    <p class="text-gray-600">ุจูุงุก ูููุฉ ูููุฉ ุณุงุนุฏุช ุงูุดุฑูุฉ ูู ุงูุญุตูู ุนูู ุนููุฏ ุญุตุฑูุฉ ูุน ูุจุงุฑ ุงููุณุชุซูุฑูู.</p>
                </div>
            `;
        }

        // Modal Functions
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('open');
            setTimeout(() => {
                document.getElementById(modalId).querySelector('.modal-content').classList.remove('show');
            }, 50);
            
            // Stop audio if playing when modal closes
            if (modalId === 'aiConsultantModal') {
                const audio = document.getElementById('ttsAudio');
                if (audio) {
                    audio.pause();
                    audio.currentTime = 0;
                }
            }
        }

        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.add('open');
            setTimeout(() => {
                modal.querySelector('.modal-content').classList.add('show');
            }, 10);
        }

        // Service Details with AI Feature
        function openServiceDetails(serviceKey) {
            const service = servicesData[serviceKey];
            document.getElementById('serviceDetailsTitle').innerText = service.name;
            
            let aiFeatureButton = '';
            // Add AI Feature only for content/marketing services to generate sample
            if (['content', 'marketing', 'profile'].includes(serviceKey)) {
                aiFeatureButton = `
                    <button onclick="generateSampleContent('${service.name}')" class="w-full mb-3 bg-gradient-to-r from-purple-500 to-indigo-600 text-white py-3 rounded-lg font-bold hover:shadow-lg transition-all flex items-center justify-center gap-2">
                        <span class="text-xl">โจ</span>
                        <span>ุฃูุดุฆ ูููุฐุฌ ูุญุชูู ุณุฑูุน ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู</span>
                    </button>
                `;
            }

            const content = document.getElementById('serviceDetailsContent');
            content.innerHTML = `
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-bold text-lg mb-2">ูุจุฐุฉ ุนู ุงูุฎุฏูุฉ</h3>
                    <p class="text-gray-600 leading-relaxed">${service.details.overview}</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h3 class="font-bold text-lg mb-3">ุงููููุฒุงุช</h3>
                        <ul class="space-y-2">
                            ${service.details.features.map(f => `<li class="flex items-center text-gray-600"><span class="text-green-500 ml-2">โ</span>${f}</li>`).join('')}
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg mb-3">ุงูููุงุฆุฏ</h3>
                        <ul class="space-y-2">
                            ${service.details.benefits.map(b => `<li class="flex items-center text-gray-600"><span class="text-blue-500 ml-2">โฆ</span>${b}</li>`).join('')}
                        </ul>
                    </div>
                </div>
                <div class="mt-6">
                    ${aiFeatureButton}
                    <button onclick="openCalculator('${serviceKey}')" class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors">
                        ุงุญุณุจ ุชูููุฉ ูุดุฑูุนู ุงูุขู
                    </button>
                </div>
            `;
            openModal('serviceDetailsModal');
        }

        // AI Consultant Functions
        function openAIModal() {
            openModal('aiConsultantModal');
            document.getElementById('aiResponse').classList.add('hidden');
            document.getElementById('aiLoading').classList.add('hidden');
            document.getElementById('ttsPlayerContainer').classList.add('hidden'); // Hide TTS player initially
            document.getElementById('aiProjectInput').value = '';
        }

        function generateSampleContent(serviceName) {
            openAIModal();
            document.getElementById('aiProjectInput').value = `ุฃุฑุบุจ ูู ูููุฐุฌ ูุจุฏุฆู ูุฎุฏูุฉ: ${serviceName}. ูุดุฑูุนู ูู... (ุฃููู ุงููุตู)`;
        }

        // Text-to-Speech Helper Function
        async function speakText(text) {
             const key = checkKeyAndPrompt();
             if (!key) return;

             const audioPlayer = document.getElementById('ttsAudio');
             const playerContainer = document.getElementById('ttsPlayerContainer');
             
             // Strip markdown for TTS
             const plainText = text.replace(/[*_#`]/g, '').slice(0, 300); // Limit length for speed
             const prompt = `Say in Arabic with a professional tone: ${plainText}`;
             
             try {
                const response = await fetch(`${baseTtsApiUrl}?key=${key}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        generationConfig: {
                            responseModalities: ["AUDIO"],
                            speechConfig: {
                                voiceConfig: {
                                    prebuiltVoiceConfig: { voiceName: "Zephyr" } 
                                }
                            }
                        }
                    })
                });
                
                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error.message || 'API Error');
                }

                if (data.candidates && data.candidates[0].content && data.candidates[0].content.parts[0].inlineData) {
                    const audioContent = data.candidates[0].content.parts[0].inlineData.data;
                    const blob = await fetch(`data:audio/mp3;base64,${audioContent}`).then(r => r.blob());
                    const audioUrl = URL.createObjectURL(blob);
                    
                    audioPlayer.src = audioUrl;
                    playerContainer.classList.remove('hidden');
                    // audioPlayer.play(); // Auto-play might be blocked by browsers
                }
             } catch (error) {
                 console.error("TTS Error:", error);
                 // Silently fail or show simple toast if TTS fails
             }
        }

        async function analyzeProjectWithGemini() {
            const input = document.getElementById('aiProjectInput').value;
            if (!input.trim()) {
                showNotification('ุงูุฑุฌุงุก ูุชุงุจุฉ ูุตู ูููุดุฑูุน ุฃููุงู', 'error');
                return;
            }

            const key = checkKeyAndPrompt();
            if (!key) return;

            // UI Loading State
            document.getElementById('aiLoading').classList.remove('hidden');
            document.getElementById('aiResponse').classList.add('hidden');
            document.getElementById('ttsPlayerContainer').classList.add('hidden'); // Hide previous audio
            
            const prompt = `
                ุฃูุช ุฎุจูุฑ ุงุณุชุดุงุฑู ููุณูู ูุญุชุฑู ูู ููุงูุฉ "ุฅู ุชู ูุงู ููุชุตููู ูุงูุชุณููู".
                ุงููุณุชุฎุฏู ูุฏูู ูุดุฑูุน ุจุงููุตู ุงูุชุงูู: "${input}".
                
                ุงููุทููุจ ููู:
                1. ุงูุชุฑุญ ุฃูุถู ุฎุฏูุชูู ุฃู ุจุงูุชูู ูู ุฎุฏูุงุชูุง (ููุงูุนุ ูุชุงุฌุฑุ ูููุฉ ุจุตุฑูุฉุ ูุญุชููุ ุชุณูููุ ุจุฑููุงููุ ุชูุงุฑูุฑ ุณูููุฉ) ุชูุงุณุจ ูุดุฑูุนู. ุงุดุฑุญ ุจุงุฎุชุตุงุฑ ููุงุฐุง ุชูุงุณุจู.
                2. ุงูุชุจ ูู ุดุนุงุฑ ุชุณูููู (Slogan) ุฌุฐุงุจ ููุตูุฑ ููุจุชูุฑ ููุดุฑูุนู.
                3. ุงุนุทู ูุตูุญุฉ ุชุณููููุฉ ุฐูุจูุฉ ูุฎุชุตุฑุฉ ููุฌุงุญ ูุดุฑูุนู.
                
                ูุณู ุงูุฅุฌุงุจุฉ ุจุดูู ุฌุฐุงุจ ุจุงุณุชุฎุฏุงู ุงูุนูุงููู ูุงูููุงุท. ุงุณุชุฎุฏู ููุฌุฉ ูุฏูุฏุฉ ูุงุญุชุฑุงููุฉ.
            `;

            try {
                const response = await fetch(`${baseApiUrl}?key=${key}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{ text: prompt }]
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    if (data.error.code === 400 || data.error.code === 403) {
                         showNotification('ููุชุงุญ API ุบูุฑ ุตุญูุญ ุฃู ููุชูู ุงูุตูุงุญูุฉ', 'error');
                         openModal('apiSettingsModal');
                    }
                    throw new Error(data.error.message);
                }

                const aiText = data.candidates[0].content.parts[0].text;
                
                // Parse Markdown and Display
                const responseDiv = document.getElementById('aiResponse');
                responseDiv.innerHTML = marked.parse(aiText);
                
                document.getElementById('aiLoading').classList.add('hidden');
                responseDiv.classList.remove('hidden');
                
                // Generate Audio
                speakText(aiText);
                
            } catch (error) {
                console.error("Error calling Gemini API:", error);
                document.getElementById('aiLoading').classList.add('hidden');
                if (!error.message.includes('API key')) {
                    showNotification('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุงุชุตุงู ุจุงููุณุชุดุงุฑ ุงูุฐูู.', 'error');
                }
            }
        }
        
        // Content Generator Functions (Replaces Slogan)
        function openContentModal() {
            openModal('contentModal');
            document.getElementById('contentResults').classList.add('hidden');
            document.getElementById('contentLoading').classList.add('hidden');
            document.getElementById('contentBizName').value = '';
            document.getElementById('contentServices').value = '';
        }

        async function generateContent() {
            const name = document.getElementById('contentBizName').value;
            const services = document.getElementById('contentServices').value;
            const type = document.getElementById('contentType').value;

            if (!name || !services) {
                showNotification('ุงูุฑุฌุงุก ุชุนุจุฆุฉ ุฌููุน ุงูุญููู', 'error');
                return;
            }

            const key = checkKeyAndPrompt();
            if (!key) return;

            document.getElementById('contentLoading').classList.remove('hidden');
            document.getElementById('contentResults').classList.add('hidden');
            
            let prompt = "";
            
            if (type === 'profile') {
                prompt = `
                    ุฃูุช ูุงุชุจ ูุญุชูู ูุญุชุฑู. ูู ุจูุชุงุจุฉ ุจุฑููุงูู ุชุนุฑููู ูุดุฑูุฉ/ูุดุฑูุน ุจุงุณู "${name}" 
                    ูุงูุฐู ููุฏู ุงูุฎุฏูุงุช ุงูุชุงููุฉ: "${services}".
                    
                    ูุฌุจ ุฃู ูุญุชูู ุงูุจุฑููุงูู ุนูู ุงูุฃูุณุงู ุงูุชุงููุฉ ุจุดูู ููุณู ูุฌุฐุงุจ:
                    1. ูู ูุญู (ููุฑุฉ ุงุญุชุฑุงููุฉ)
                    2. ุงูุฑุคูุฉ (ุฌููุฉ ููููุฉ)
                    3. ุงูุฑุณุงูุฉ (ุฌููุฉ ูุงุถุญุฉ)
                    4. ุงูุฃูุฏุงู (3 ููุงุท)
                    5. ุฎุฏูุงุชูุง (ูุงุฆูุฉ ููุณูุฉ)
                    6. ูุนูููุงุช ุงูุชูุงุตู (ุงุชุฑู ููุงู ููุฃุฑูุงู)
                    
                    ุงุณุชุฎุฏู ูุบุฉ ุนุฑุจูุฉ ูุตุญู ููููุฉ ุชุณููููุงู. ูุณู ุงูุฅุฌุงุจุฉ ุจุงุณุชุฎุฏุงู Markdown.
                `;
            } else if (type === 'seo') {
                prompt = `
                    ุฃูุช ุฎุจูุฑ SEO. ููุดุฑูุน ุจุงุณู "${name}" ููุฏู: "${services}".
                    ูู ุจุชูููุฏ ูุง ููู ูุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ:
                    1. ูุงุฆูุฉ ุจุฃูู 10 ูููุงุช ููุชุงุญูุฉ (Keywords) ูุณุชูุฏูุฉ ูุนูููุง ุจุญุซ ุนุงูู.
                    2. ูุตู ููุชุง (Meta Description) ุฌุฐุงุจ ูููููุน ูุง ูุชุฌุงูุฒ 160 ุญุฑู.
                    3. ุนููุงู ุตูุญุฉ (Page Title) ุฌุฐุงุจ.
                    4. ููุฑุฉ ุชุนุฑูููุฉ ูุตูุฑุฉ ูููููุน ุชุญุชูู ุนูู ุงููููุงุช ุงูููุชุงุญูุฉ ุจุดูู ุทุจูุนู.
                    
                    ูุณู ุงูุฅุฌุงุจุฉ ุจูุถูุญ.
                `;
            } else { // ad
                prompt = `
                    ุฃูุช ูุงุชุจ ุฅุนูุงูุงุช ูุจุฏุน (Copywriter). ุงูุชุจ ุฅุนูุงู ุชุณูููู ูุตูุฑ ูุฌุฐุงุจ ูููุตุฉ ุชููุชุฑ/ุงูุณุชูุฑุงู
                    ููุดุฑูุน "${name}" ุงูุฐู ููุฏู: "${services}".
                    
                    ุงูุฅุนูุงู ูุฌุจ ุฃู ูููู:
                    - ูุจุฏุฃ ุจุณุคุงู ุฃู ุฌููุฉ ุฎุงุทูุฉ ููุงูุชุจุงู.
                    - ูุฑูุฒ ุนูู ุงููุงุฆุฏุฉ ููุนููู.
                    - ูุญุชูู ุนูู ุฏุนูุฉ ูุงุชุฎุงุฐ ุฅุฌุฑุงุก (Call to Action).
                    - ุงุณุชุฎุฏู ุฅูููุฌู ููุงุณุจ.
                `;
            }

            try {
                const response = await fetch(`${baseApiUrl}?key=${key}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }]
                    })
                });

                const data = await response.json();
                
                if (data.error) throw new Error(data.error.message);

                let contentHtml = data.candidates[0].content.parts[0].text;

                const resultsDiv = document.getElementById('contentResultsText');
                resultsDiv.innerHTML = marked.parse(contentHtml);
                
                document.getElementById('contentLoading').classList.add('hidden');
                document.getElementById('contentResults').classList.remove('hidden');

            } catch (error) {
                console.error("Content Gen Error:", error);
                showNotification('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชูููุฏ ุงููุญุชูู.', 'error');
                document.getElementById('contentLoading').classList.add('hidden');
            }
        }
        
        function copyContent() {
            const content = document.getElementById('contentResultsText').innerText;
            navigator.clipboard.writeText(content).then(() => {
                showNotification('ุชู ูุณุฎ ุงููุต ุจูุฌุงุญ!', 'success');
            });
        }
        
        // Message Refiner Function
        async function refineMessage() {
            const messageBox = document.getElementById('contactMessage');
            const originalText = messageBox.value;

            if (!originalText || originalText.length < 5) {
                showNotification('ุงูุฑุฌุงุก ูุชุงุจุฉ ุฑุณุงูุฉ ุฃููุงู ูุชุญุณูููุง', 'error');
                return;
            }
            
            const key = checkKeyAndPrompt();
            if (!key) return;
            
            showNotification('ุฌุงุฑู ุชุญุณูู ุตูุงุบุฉ ุงูุฑุณุงูุฉ...', 'info');
            
            const prompt = `
                ุฃุนุฏ ุตูุงุบุฉ ุงูุฑุณุงูุฉ ุงูุชุงููุฉ ูุชููู ุฃูุซุฑ ุงุญุชุฑุงููุฉ ูุชูุฐูุจุงู ููุถูุญุงูุ ูุงูููุฌูุฉ ูุดุฑูุฉ ุชุตููู ูุชุณููู:
                "${originalText}"
                ููุท ุงูุชุจ ุงูุฑุณุงูุฉ ุงููุญุณูุฉ ุจุฏูู ุฃู ููุฏูุงุช ุฃู ุงูุชุจุงุณุงุช.
            `;
            
            try {
                 const response = await fetch(`${baseApiUrl}?key=${key}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }]
                    })
                });
                
                const data = await response.json();
                if (data.error) throw new Error(data.error.message);
                
                const improvedText = data.candidates[0].content.parts[0].text.trim();
                
                messageBox.value = improvedText;
                showNotification('ุชู ุชุญุณูู ุฑุณุงูุชู ุจูุฌุงุญ! โจ', 'success');
                
            } catch (error) {
                console.error("Refine Error:", error);
                showNotification('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญุณูู ุงูุฑุณุงูุฉ.', 'error');
            }
        }
        
        // --- NEW FEATURES ---

        // 1. Logo Generator (Imagen)
        function openLogoModal() {
            openModal('logoModal');
            document.getElementById('logoResult').classList.add('hidden');
            document.getElementById('logoLoading').classList.add('hidden');
            document.getElementById('logoArName').value = '';
            document.getElementById('logoEnName').value = '';
            document.getElementById('logoIconDesc').value = '';
        }

        async function generateLogoConcept() {
            const arName = document.getElementById('logoArName').value;
            const enName = document.getElementById('logoEnName').value;
            const desc = document.getElementById('logoIconDesc').value;
            
            if (!arName || !enName || !desc) {
                showNotification('ุงูุฑุฌุงุก ุชุนุจุฆุฉ ุฌููุน ุงูุญููู ูุชุตููู ุฏููู', 'error');
                return;
            }

            const key = checkKeyAndPrompt();
            if (!key) return;

            document.getElementById('logoLoading').classList.remove('hidden');
            document.getElementById('logoResult').classList.add('hidden');

            const finalPrompt = `
                Professional modern logo design. 
                Icon: ${desc}. 
                Layout: Icon above text.
                Text: "${enName}" written in clear modern sans-serif font underneath the icon.
                Style: Vector graphic, minimalist, flat design, white background.
                Colors: Unified color palette matching description: ${desc}.
                High quality, sharp lines.
            `;

            try {
                const response = await fetch(`${baseImagenApiUrl}?key=${key}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        instances: [{ prompt: finalPrompt }],
                        parameters: { sampleCount: 1 }
                    })
                });

                const data = await response.json();
                
                if (data.error) throw new Error(data.error.message);

                if (data.predictions && data.predictions.length > 0) {
                    const base64Image = data.predictions[0].bytesBase64Encoded;
                    const imgElement = document.getElementById('generatedLogoImage');
                    imgElement.src = `data:image/png;base64,${base64Image}`;
                    
                    document.getElementById('logoLoading').classList.add('hidden');
                    document.getElementById('logoResult').classList.remove('hidden');
                } else {
                    throw new Error("No image generated");
                }

            } catch (error) {
                console.error("Imagen Error:", error);
                showNotification('ุนุฐุฑุงูุ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชูููุฏ ุงูุดุนุงุฑ.', 'error');
                document.getElementById('logoLoading').classList.add('hidden');
            }
        }

        // 2. Smart Quote (JSON Structured Output)
        function openSmartQuoteModal() {
            openModal('smartQuoteModal');
            document.getElementById('smartQuoteLoading').classList.add('hidden');
            document.getElementById('smartQuoteInput').value = '';
        }

        async function calculateSmartQuote() {
            const input = document.getElementById('smartQuoteInput').value;
            if (!input) {
                showNotification('ุงูุฑุฌุงุก ูุตู ูุดุฑูุนู ุฃููุงู', 'error');
                return;
            }
            
            const key = checkKeyAndPrompt();
            if (!key) return;

            document.getElementById('smartQuoteLoading').classList.remove('hidden');
            
            // Prepare keys description for the model
            const availableServices = Object.keys(servicesData).map(key => `${key} (${servicesData[key].name})`).join(', ');

            const prompt = `
                You are a smart sales assistant.
                User Request: "${input}"
                
                Available Service Keys:
                - profile (Company Profile Design)
                - websites (Websites & E-commerce)
                - content (Content Creation)
                - identity (Visual Identity & Branding)
                - marketing (Digital Marketing)
                - menu (Menu Design)
                - analytics (Data Analytics)
                - schoolActivities (School Activities)
                - annualReport (Annual Reports)
                - letterhead (Commercial Printing/Letterhead)

                Task: Identify which service keys match the user's request. 
                Return strictly valid JSON with this format: { "matches": ["key1", "key2"] }
                If unsure, pick the closest match.
            `;

            try {
                const response = await fetch(`${baseApiUrl}?key=${key}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        generationConfig: {
                            responseMimeType: "application/json"
                        }
                    })
                });

                const data = await response.json();
                
                if (data.error) throw new Error(data.error.message);

                const jsonResponse = JSON.parse(data.candidates[0].content.parts[0].text);
                const matches = jsonResponse.matches || [];

                if (matches.length > 0) {
                    closeModal('smartQuoteModal');
                    openCustomQuote(matches);
                    showNotification(`ุชู ุงูุนุซูุฑ ุนูู ${matches.length} ุฎุฏูุงุช ุชูุงุณุจ ุทูุจู!`, 'success');
                } else {
                    showNotification('ูู ูุชููู ูู ุชุญุฏูุฏ ุงูุฎุฏูุงุช ุจุฏูุฉ. ูุฑุฌู ุชุตูุญ ุงููุงุฆูุฉ ูุฏููุงู.', 'info');
                    document.getElementById('smartQuoteLoading').classList.add('hidden');
                }

            } catch (error) {
                console.error("Smart Quote Error:", error);
                showNotification('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงูุทูุจ.', 'error');
                document.getElementById('smartQuoteLoading').classList.add('hidden');
            }
        }

        function openCustomQuote(serviceKeys) {
            currentCart.isPackage = false;
            currentCart.items = [];
            currentCart.serviceKey = 'custom'; // Custom aggregation
            
            let htmlContent = '<h3 class="font-bold text-xl mb-4 text-blue-800">ุนุฑุถ ุณุนุฑ ูุฎุตุต ูู (AI)</h3><div class="space-y-6">';

            serviceKeys.forEach(key => {
                if (servicesData[key]) {
                    const service = servicesData[key];
                    // Add the first item of each service as a default recommendation
                    const defaultItem = service.items[0]; 
                    currentCart.items.push({ name: defaultItem.name, price: defaultItem.price });

                    htmlContent += `
                        <div class="border-b pb-4">
                            <h4 class="font-bold text-gray-700 mb-2">${service.name}</h4>
                            <div class="space-y-2">
                                ${service.items.map((item) => {
                                    const isChecked = currentCart.items.some(i => i.name === item.name) ? 'checked' : '';
                                    return `
                                    <label class="flex items-center justify-between p-2 rounded hover:bg-gray-50 cursor-pointer">
                                        <div class="flex items-center">
                                            <input type="checkbox" ${isChecked} onchange="updateTotal(null, ${item.price}, '${item.name}')" class="form-checkbox h-4 w-4 text-blue-600 rounded">
                                            <span class="mr-2 text-sm text-gray-600">${item.name}</span>
                                        </div>
                                        <span class="font-bold text-sm">${item.price} ุฑูุงู</span>
                                    </label>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    `;
                }
            });
            htmlContent += '</div>';

            document.getElementById('calculatorContent').innerHTML = htmlContent;
            updateDisplayTotal();
            openModal('calculatorModal');
        }


        // Calculator Logic
        function openCalculator(serviceKey) {
            closeModal('serviceDetailsModal');
            currentCart.serviceKey = serviceKey;
            currentCart.items = [];
            currentCart.isPackage = false;
            currentCart.packageKey = null;
            
            const service = servicesData[serviceKey];
            const container = document.getElementById('calculatorContent');
            
            container.innerHTML = `
                <h3 class="font-bold text-xl mb-4 text-blue-800">${service.name}</h3>
                <div class="space-y-3">
                    ${service.items.map((item, index) => `
                        <label class="flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
                            <div class="flex items-center">
                                <input type="checkbox" onchange="updateTotal(${index}, ${item.price}, '${item.name}')" class="form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500">
                                <span class="mr-3 text-gray-700">${item.name}</span>
                            </div>
                            <span class="font-bold text-gray-900">${item.price} ุฑูุงู</span>
                        </label>
                    `).join('')}
                </div>
            `;
            
            updateDisplayTotal();
            openModal('calculatorModal');
        }

        function updateTotal(index, price, name) {
            const existingIndex = currentCart.items.findIndex(i => i.name === name);
            if (existingIndex > -1) {
                currentCart.items.splice(existingIndex, 1);
            } else {
                currentCart.items.push({ name, price });
            }
            updateDisplayTotal();
        }

        function updateDisplayTotal() {
            let total = 0;
            currentCart.items.forEach(item => total += item.price);
            
            document.getElementById('subtotal').innerText = total + ' ุฑูุงู';
            
            // Apply mock discount logic if total > 2000
            let discount = 0;
            if (currentCart.isPackage) {
                // Logic handled separately for packages
            } else if (total > 2000) {
                discount = Math.floor(total * 0.1);
            }
            
            document.getElementById('discount-amount').innerText = discount + ' ุฑูุงู';
            document.getElementById('total').innerText = (total - discount) + ' ุฑูุงู';
            
            currentCart.total = total - discount;
            currentCart.originalTotal = total;
            currentCart.discount = discount;
        }

        // Packages Logic
        function showAllPackages() {
            const container = document.getElementById('allPackagesContent');
            container.innerHTML = '';
            
            Object.keys(servicePackages).forEach(key => {
                const pkg = servicePackages[key];
                const card = document.createElement('div');
                card.className = 'border rounded-xl p-6 hover:shadow-lg transition-shadow bg-white flex flex-col relative overflow-hidden';
                card.innerHTML = `
                    <div class="absolute top-0 left-0 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-br-lg">
                        ุฎุตู ${pkg.discount}%
                    </div>
                    <h3 class="font-bold text-lg mb-2 text-gray-800">${pkg.name}</h3>
                    <p class="text-sm text-gray-500 mb-4 h-10">${pkg.description}</p>
                    <ul class="text-sm text-gray-600 space-y-1 mb-4 flex-grow">
                        ${pkg.includes.slice(0, 3).map(i => `<li>โข ${i}</li>`).join('')}
                    </ul>
                    <div class="mt-auto">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="text-gray-400 line-through text-sm">${pkg.originalPrice} ุฑูุงู</span>
                            <span class="text-red-600 font-bold text-lg">${pkg.discountedPrice} ุฑูุงู</span>
                        </div>
                        <button onclick="selectPackage('${key}')" class="w-full bg-gradient-to-r from-teal-500 to-blue-500 text-white py-2 rounded-lg font-bold hover:shadow-md transition-all text-sm">
                            ุงุฎุชุฑ ุงูุจุงูุฉ
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
            openModal('allPackagesModal');
        }

        function selectPackage(packageKey) {
            const pkg = servicePackages[packageKey];
            currentCart.isPackage = true;
            currentCart.packageKey = packageKey;
            currentCart.items = pkg.includes.map(name => ({ name, price: 0 })); // Items included
            currentCart.originalTotal = pkg.originalPrice;
            currentCart.total = pkg.discountedPrice;
            currentCart.discount = pkg.originalPrice - pkg.discountedPrice;
            
            // Populate Calculator Modal directly
            const container = document.getElementById('calculatorContent');
            container.innerHTML = `
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                    <h3 class="font-bold text-lg text-blue-800 mb-2">${pkg.name}</h3>
                    <p class="text-sm text-blue-600 mb-2">${pkg.description}</p>
                    <div class="text-sm text-gray-600">
                        <strong>ูุดูู:</strong>
                        <ul class="list-disc list-inside mt-1">
                            ${pkg.includes.map(i => `<li>${i}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
            
            document.getElementById('subtotal').innerText = pkg.originalPrice + ' ุฑูุงู';
            document.getElementById('discount-amount').innerText = (pkg.originalPrice - pkg.discountedPrice) + ' ุฑูุงู';
            document.getElementById('total').innerText = pkg.discountedPrice + ' ุฑูุงู';
            
            closeModal('allPackagesModal');
            openModal('calculatorModal');
        }

        // Utilities
        function showNotification(message, type = 'info') {
            const notif = document.getElementById('notification');
            notif.innerText = message;
            notif.className = `notification ${type} show`;
            setTimeout(() => {
                notif.classList.remove('show');
            }, 3000);
        }

        function sendToWhatsApp() {
            let message = "ูุฑุญุจุงูุ ุฃุฑุบุจ ูู ุทูุจ ุงูุฎุฏูุงุช ุงูุชุงููุฉ:\n\n";
            if (currentCart.isPackage) {
                message += `*ุงูุจุงูุฉ ุงููุฎุชุงุฑุฉ:* ${servicePackages[currentCart.packageKey].name}\n`;
            } else {
                currentCart.items.forEach(item => {
                    message += `- ${item.name}: ${item.price} ุฑูุงู\n`;
                });
            }
            message += `\n*ุงูุฅุฌูุงูู:* ${currentCart.total} ุฑูุงู`;
            
            const url = `https://wa.me/966596466303?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }

        // PDF Generation
        function showDownloadOptions() {
            if (currentCart.items.length === 0 && !currentCart.isPackage) {
                showNotification("ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ุฎุฏูุงุช ุฃููุงู", "error");
                return;
            }
            openModal('downloadOptionsModal');
        }

        async function prepareQuoteElement() {
            const el = document.getElementById('quoteTemplate');
            const date = new Date().toLocaleDateString('ar-SA');
            
            let itemsHtml = '';
            if (currentCart.isPackage) {
                itemsHtml = `
                    <tr style="background-color: #f3f4f6;">
                        <td style="padding: 10px; border: 1px solid #ddd;">${servicePackages[currentCart.packageKey].name}</td>
                        <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentCart.originalTotal} ุฑูุงู</td>
                    </tr>
                `;
            } else {
                itemsHtml = currentCart.items.map(item => `
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;">${item.name}</td>
                        <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${item.price} ุฑูุงู</td>
                    </tr>
                `).join('');
            }

            el.innerHTML = `
                <div style="border: 2px solid #3b82f6; padding: 20px; border-radius: 10px; height: 100%;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 2px solid #eee; padding-bottom: 20px;">
                        <div>
                            <h1 style="color: #1e40af; margin: 0; font-size: 24px;">ุนุฑุถ ุณุนุฑ</h1>
                            <p style="color: #666; margin: 5px 0;">ุงูุชุงุฑูุฎ: ${date}</p>
                        </div>
                        <div style="text-align: left;">
                            <h2 style="margin: 0; color: #333;">ุฅู ุชู ูุงู ููุชุตููู</h2>
                            <p style="margin: 5px 0; font-size: 14px;">ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ</p>
                        </div>
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 30px;">
                        <thead>
                            <tr style="background-color: #1e40af; color: white;">
                                <th style="padding: 12px; text-align: right;">ุงูุฎุฏูุฉ / ุงููุตู</th>
                                <th style="padding: 12px; text-align: center; width: 150px;">ุงูุณุนุฑ</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${itemsHtml}
                        </tbody>
                    </table>
                    
                    <div style="width: 250px; margin-right: auto; background: #f9fafb; padding: 15px; border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>ุงููุฌููุน:</span>
                            <span>${currentCart.originalTotal} ุฑูุงู</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px; color: #dc2626;">
                            <span>ุงูุฎุตู:</span>
                            <span>${currentCart.discount} ุฑูุงู</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-weight: bold; border-top: 1px solid #ddd; padding-top: 10px; color: #1e40af; font-size: 18px;">
                            <span>ุงูุฅุฌูุงูู ุงูููุงุฆู:</span>
                            <span>${currentCart.total} ุฑูุงู</span>
                        </div>
                    </div>

                    <div style="margin-top: 50px; text-align: center; color: #666; font-size: 12px; border-top: 1px solid #eee; padding-top: 20px;">
                        ูุฐุง ุนุฑุถ ุณุนุฑ ูุจุฏุฆู ุตุงูุญ ููุฏุฉ 7 ุฃูุงู. ููุชูุงุตู: +966 59 646 6303
                    </div>
                </div>
            `;
            return el;
        }

        async function downloadQuotePDF() {
            showNotification('ุฌุงุฑู ุชุฌููุฒ ุงูููู...', 'info');
            const element = await prepareQuoteElement();
            const { jsPDF } = window.jspdf;
            
            html2canvas(element, { scale: 2 }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save('ุนุฑุถ_ุณุนุฑ_ุฅู_ุชู_ูุงู.pdf');
                showNotification('ุชู ุชุญููู ุงูููู ุจูุฌุงุญ!', 'success');
                closeModal('downloadOptionsModal');
            });
        }

        async function downloadQuoteImage() {
            showNotification('ุฌุงุฑู ุชุฌููุฒ ุงูุตูุฑุฉ...', 'info');
            const element = await prepareQuoteElement();
            
            html2canvas(element, { scale: 2 }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'ุนุฑุถ_ุณุนุฑ_ุฅู_ุชู_ูุงู.png';
                link.href = canvas.toDataURL();
                link.click();
                showNotification('ุชู ุชุญููู ุงูุตูุฑุฉ ุจูุฌุงุญ!', 'success');
                closeModal('downloadOptionsModal');
            });
        }
    </script>
</body>
</html>